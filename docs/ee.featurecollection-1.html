<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>8 ee.FeatureCollection | Cómo usar Google Earth Engine y no fallar en el intento</title>
  <meta name="description" content="8 ee.FeatureCollection | Cómo usar Google Earth Engine y no fallar en el intento" />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="8 ee.FeatureCollection | Cómo usar Google Earth Engine y no fallar en el intento" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8 ee.FeatureCollection | Cómo usar Google Earth Engine y no fallar en el intento" />
  
  
  

<meta name="author" content="Jonathan Vidal Solórzano Villegas y Gabriel Alejandro Perilla Suárez" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="ee.feature-1.html"/>
<link rel="next" href="ee.image-1.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

true

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Cómo usar Google Earth Engine y no fallar en el intento</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ee.featurecollection-1" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">8</span> ee.FeatureCollection<a href="ee.featurecollection-1.html#ee.featurecollection-1" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>
Las colecciones de vectores (<code>ee.FeatureCollection</code>) son objetos de GEE que contienen un conjunto de vectores, de modo que pueden contener objetos <code>ee.Feature</code> con geometrías diferentes (polígono, línea, punto, multipunto, multipolígono). La mayoría de los acervos de información vectorial disponibles en GEE van a ser definidos como colecciones de vectores. Para el manejo de varios vectores se recomienda utilizar esta estructura, en lugar de listas u otro tipo de objetos, ya que esto facilita ejecutar operaciones sobre todo el conjunto de vectores. Por ejemplo (<span style="color: darkblue;">Fig.</span> <a href="ee.featurecollection-1.html#fig:f81">8.1</a>):</p>
<div class="bluebox2">
<div class="awesomeblock">
<p>GEE ofrece un catálogo de colecciones de vectores que se puede buscar en la barra de búsqueda. Estas colecciones de vectores se llaman tablas (<em>tables</em>).</p>
</div>
</div>
<p>Ejercicio 13</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb39-1"><a href="ee.featurecollection-1.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co">// En el buscador se busca una tabla de países &#39;countries&#39; y se escribe </span></span>
<span id="cb39-2"><a href="ee.featurecollection-1.html#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="co">// el ID de la tabla, en este caso es una colección de vectores del </span></span>
<span id="cb39-3"><a href="ee.featurecollection-1.html#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="co">// Departamento de Estado de Estados Unidos, que contiene las divisiones </span></span>
<span id="cb39-4"><a href="ee.featurecollection-1.html#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co">// políticas de los países del mundo  </span></span>
<span id="cb39-5"><a href="ee.featurecollection-1.html#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> paises <span class="op">=</span> ee<span class="op">.</span><span class="fu">FeatureCollection</span>(<span class="st">&#39;USDOS/LSIB_SIMPLE/2017&#39;</span>)<span class="op">;</span></span></code></pre></div>
<script type="text/javascript">
// En el buscador se busca una tabla de países 'countries' y se escribe 
// el ID de la tabla, en este caso es una colección de vectores del 
// Departamento de Estado de Estados Unidos, que contiene las divisiones 
// políticas de los países del mundo  
var paises = ee.FeatureCollection('USDOS/LSIB_SIMPLE/2017');
</script>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:f81"></span>
<img src="Img/ej13.png" alt="Visualización de la colección de vectores con los límites internacionales, así como su salida en la consola." width="80%" />
<p class="caption">
Figure 8.1: Visualización de la colección de vectores con los límites internacionales, así como su salida en la consola.
</p>
</div>
<div class="bluebox2">
<div class="awesomeblock">
<p>La búsqueda de información vectorial en los acervos de GEE es más difícil que la búsqueda de imágenes. Eso ocurre porque a pesar de que hay mucha información vectorial disponible (compartida por usuarios), solo está indexada la información compartida por Google.</p>
</div>
</div>
<div id="información-y-metadatos-2" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Información y metadatos<a href="ee.featurecollection-1.html#información-y-metadatos-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>
En las colecciones de vectores se ubican los metadatos e información de todos los vectores que contienen. Gracias a ello se puede utilizar esta información para filtrar y utilizar únicamente los vectores que cumplen con ciertos criterios. Algunos de los métodos que permiten examinar una colección de vectores incluyen <code>.size</code> y <code>.limit</code> (<span style="color: darkblue;">Fig.</span> <a href="ee.featurecollection-1.html#fig:f82">8.2</a>).</p>
<div class="bluebox2">
<div class="awesomeblock">
<p>Al usar <code>print</code> con las colecciones de vectores, la consola puede mostrar un máximo de 5000 vectores. En caso que uno necesite usar <code>print</code> en una colección de más de 5000 vectores, será necesario filtrar la colección previamente. Otra opción es limitar la cantidad de vectores que se vayan a mostrar. Para ello se puede usar el método <code>.limit</code>, el cual permite especificar la cantidad de vectores que queremos ver (siempre que sean &lt;= 5000; <span style="color: darkblue;">Fig.</span> <a href="ee.featurecollection-1.html#fig:f82">8.2</a>).</p>
</div>
</div>
<p>Ejercicio 14</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb40-1"><a href="ee.featurecollection-1.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Llamamos una capa de cuencas de alta resolución de GEE</span></span>
<span id="cb40-2"><a href="ee.featurecollection-1.html#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> cuencas <span class="op">=</span> ee<span class="op">.</span><span class="fu">FeatureCollection</span>(<span class="st">&#39;WWF/HydroSHEDS/v1/Basins/hybas_12&#39;</span>)<span class="op">;</span></span>
<span id="cb40-3"><a href="ee.featurecollection-1.html#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="ee.featurecollection-1.html#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co">// Cantidad de vectores en la colección (1034083)</span></span>
<span id="cb40-5"><a href="ee.featurecollection-1.html#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> cantidad <span class="op">=</span>cuencas<span class="op">.</span><span class="fu">size</span>()<span class="op">;</span> </span>
<span id="cb40-6"><a href="ee.featurecollection-1.html#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="co">// Seleccionamos solo los primeros 50 vectores</span></span>
<span id="cb40-7"><a href="ee.featurecollection-1.html#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> primeras50cuencas<span class="op">=</span> cuencas<span class="op">.</span><span class="fu">limit</span>(<span class="dv">50</span>)<span class="op">;</span> </span>
<span id="cb40-8"><a href="ee.featurecollection-1.html#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="co">// Este comando resultará en un error porque excede los 5000 vectores</span></span>
<span id="cb40-9"><a href="ee.featurecollection-1.html#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(cuencas)<span class="op">;</span> </span>
<span id="cb40-10"><a href="ee.featurecollection-1.html#cb40-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-11"><a href="ee.featurecollection-1.html#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="co">// Esta capa contiene todos los vectores 1034083. Nótese que en el mapa </span></span>
<span id="cb40-12"><a href="ee.featurecollection-1.html#cb40-12" aria-hidden="true" tabindex="-1"></a><span class="co">// sí se pueden proyectar más de 5000 vectores, aunque esta capa es un </span></span>
<span id="cb40-13"><a href="ee.featurecollection-1.html#cb40-13" aria-hidden="true" tabindex="-1"></a><span class="co">// poco pesada </span></span>
<span id="cb40-14"><a href="ee.featurecollection-1.html#cb40-14" aria-hidden="true" tabindex="-1"></a><span class="bu">Map</span><span class="op">.</span><span class="fu">addLayer</span>(cuencas<span class="op">,</span>{}<span class="op">,</span><span class="st">&#39;todas las cuencas&#39;</span>)<span class="op">;</span></span>
<span id="cb40-15"><a href="ee.featurecollection-1.html#cb40-15" aria-hidden="true" tabindex="-1"></a><span class="co">// Esta capa solo contiene las primeras 1000 cuencas y carga mucho más </span></span>
<span id="cb40-16"><a href="ee.featurecollection-1.html#cb40-16" aria-hidden="true" tabindex="-1"></a><span class="co">// rápido (Noroccidente de África)</span></span>
<span id="cb40-17"><a href="ee.featurecollection-1.html#cb40-17" aria-hidden="true" tabindex="-1"></a><span class="bu">Map</span><span class="op">.</span><span class="fu">addLayer</span>(cuencas<span class="op">.</span><span class="fu">limit</span>(<span class="dv">1000</span>)<span class="op">,</span>{<span class="dt">color</span><span class="op">:</span><span class="st">&#39;00ff00&#39;</span>}<span class="op">,</span><span class="st">&#39;1000 cuencas filtradas&#39;</span>)<span class="op">;</span></span></code></pre></div>
<script type="text/javascript">
// Llamamos una capa de cuencas de alta resolución de GEE
var cuencas = ee.FeatureCollection('WWF/HydroSHEDS/v1/Basins/hybas_12');

// Cantidad de vectores en la colección (1034083)
var cantidad =cuencas.size(); 
// Seleccionamos solo los primeros 50 vectores
var primeras50cuencas= cuencas.limit(50); 
// Este comando resultará en un error porque excede los 5000 vectores
print(cuencas); 

// Esta capa contiene todos los vectores 1034083. Nótese que en el mapa 
// sí se pueden proyectar más de 5000 vectores, aunque esta capa es un 
// poco pesada 
Map.addLayer(cuencas,{},'todas las cuencas');
// Esta capa solo contiene las primeras 1000 cuencas y carga mucho más 
// rápido (Noroccidente de África)
Map.addLayer(cuencas.limit(1000),{color:'00ff00'},'1000 cuencas filtradas');
</script>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:f82"></span>
<img src="Img/ej14.png" alt="Visualización de las primeras 1000 cuencas, así como su salida en la consola." width="80%" />
<p class="caption">
Figure 8.2: Visualización de las primeras 1000 cuencas, así como su salida en la consola.
</p>
</div>
</div>
<div id="creación-de-colecciones-de-vectores" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> Creación de colecciones de vectores<a href="ee.featurecollection-1.html#creación-de-colecciones-de-vectores" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Una colección de vectores se define a partir del método <code>ee.FeatureCollection</code> y puede contener geometrías, vectores o inclusive otra colección de vectores. Una colección de vectores puede contener un solo vector o una sola geometría y sus elementos pueden tener o no atributos. Por ejemplo (<span style="color: darkblue;">Fig.</span> <a href="ee.featurecollection-1.html#fig:f83">8.3</a>, <a href="ee.featurecollection-1.html#fig:f84">8.4</a>):</p>
<p>Ejercicio 15</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb41-1"><a href="ee.featurecollection-1.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Crear una colección de vectores con un solo punto, sin atributos </span></span>
<span id="cb41-2"><a href="ee.featurecollection-1.html#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> coleccion <span class="op">=</span> ee<span class="op">.</span><span class="fu">FeatureCollection</span>(ee<span class="op">.</span><span class="at">Geometry</span><span class="op">.</span><span class="fu">Point</span>(<span class="fl">16.37</span><span class="op">,</span> <span class="fl">48.225</span>))<span class="op">;</span></span></code></pre></div>
<script type="text/javascript">
// Crear una colección de vectores con un solo punto, sin atributos 
var coleccion = ee.FeatureCollection(ee.Geometry.Point(16.37, 48.225));
</script>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:f83"></span>
<img src="Img/ej15.png" alt="Visualización de una colección de vectores con un único objeto de geometría de tipo punto." width="60%" />
<p class="caption">
Figure 8.3: Visualización de una colección de vectores con un único objeto de geometría de tipo punto.
</p>
</div>
<p>Ejercicio 16</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb42-1"><a href="ee.featurecollection-1.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Información adicional para el ejemplo, creación de </span></span>
<span id="cb42-2"><a href="ee.featurecollection-1.html#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="co">// distintos vectores (ee.Feature),</span></span>
<span id="cb42-3"><a href="ee.featurecollection-1.html#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="co">// cada cual con diferentes tipos de geometrías y distintos</span></span>
<span id="cb42-4"><a href="ee.featurecollection-1.html#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="co">// atributos, esto para mostrar que una ee.FeatureCollection </span></span>
<span id="cb42-5"><a href="ee.featurecollection-1.html#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="co">// no requiere que todos sus elementos (ee.Feature)</span></span>
<span id="cb42-6"><a href="ee.featurecollection-1.html#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="co">// tengan los mismos atributos ni geometrías</span></span>
<span id="cb42-7"><a href="ee.featurecollection-1.html#cb42-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-8"><a href="ee.featurecollection-1.html#cb42-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-9"><a href="ee.featurecollection-1.html#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> Punto <span class="op">=</span> ee<span class="op">.</span><span class="fu">Feature</span>(ee<span class="op">.</span><span class="at">Geometry</span><span class="op">.</span><span class="fu">Point</span>(<span class="op">-</span><span class="fl">99.1362</span><span class="op">,</span> <span class="fl">19.4352</span>)<span class="op">,</span></span>
<span id="cb42-10"><a href="ee.featurecollection-1.html#cb42-10" aria-hidden="true" tabindex="-1"></a>    {<span class="dt">pais</span><span class="op">:</span><span class="st">&#39;Mexico&#39;</span><span class="op">,</span><span class="dt">capital</span><span class="op">:</span><span class="st">&#39;cdmx&#39;</span>})<span class="op">;</span></span>
<span id="cb42-11"><a href="ee.featurecollection-1.html#cb42-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-12"><a href="ee.featurecollection-1.html#cb42-12" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> Multipunto <span class="op">=</span> ee<span class="op">.</span><span class="fu">Feature</span>(</span>
<span id="cb42-13"><a href="ee.featurecollection-1.html#cb42-13" aria-hidden="true" tabindex="-1"></a>ee<span class="op">.</span><span class="at">Geometry</span><span class="op">.</span><span class="fu">MultiPoint</span>([<span class="op">-</span><span class="fl">90.496</span><span class="op">,</span> <span class="fl">14.605</span><span class="op">,</span>                               </span>
<span id="cb42-14"><a href="ee.featurecollection-1.html#cb42-14" aria-hidden="true" tabindex="-1"></a>                        <span class="op">-</span><span class="fl">88.717</span><span class="op">,</span> <span class="fl">17.245</span><span class="op">,</span>                              </span>
<span id="cb42-15"><a href="ee.featurecollection-1.html#cb42-15" aria-hidden="true" tabindex="-1"></a>                        <span class="op">-</span><span class="fl">87.157</span><span class="op">,</span> <span class="fl">14.094</span><span class="op">,</span></span>
<span id="cb42-16"><a href="ee.featurecollection-1.html#cb42-16" aria-hidden="true" tabindex="-1"></a>                        <span class="op">-</span><span class="fl">89.2275</span><span class="op">,</span> <span class="fl">13.6937</span><span class="op">,</span></span>
<span id="cb42-17"><a href="ee.featurecollection-1.html#cb42-17" aria-hidden="true" tabindex="-1"></a>                        <span class="op">-</span><span class="fl">86.273</span><span class="op">,</span> <span class="fl">12.115</span></span>
<span id="cb42-18"><a href="ee.featurecollection-1.html#cb42-18" aria-hidden="true" tabindex="-1"></a>                        <span class="op">-</span><span class="fl">84.097</span><span class="op">,</span> <span class="fl">9.958</span></span>
<span id="cb42-19"><a href="ee.featurecollection-1.html#cb42-19" aria-hidden="true" tabindex="-1"></a>                        <span class="op">-</span><span class="fl">79.527</span><span class="op">,</span> <span class="fl">8.983</span>])<span class="op">,</span></span>
<span id="cb42-20"><a href="ee.featurecollection-1.html#cb42-20" aria-hidden="true" tabindex="-1"></a>    { <span class="dt">pais</span><span class="op">:</span> [<span class="st">&#39;Guatemala&#39;</span><span class="op">,</span> </span>
<span id="cb42-21"><a href="ee.featurecollection-1.html#cb42-21" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;Belice&#39;</span><span class="op">,</span> </span>
<span id="cb42-22"><a href="ee.featurecollection-1.html#cb42-22" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;Honduras&#39;</span><span class="op">,</span> </span>
<span id="cb42-23"><a href="ee.featurecollection-1.html#cb42-23" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;El Salvador&#39;</span><span class="op">,</span> </span>
<span id="cb42-24"><a href="ee.featurecollection-1.html#cb42-24" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;Nicaragua&#39;</span><span class="op">,</span> </span>
<span id="cb42-25"><a href="ee.featurecollection-1.html#cb42-25" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;Costa Rica&#39;</span><span class="op">,</span> </span>
<span id="cb42-26"><a href="ee.featurecollection-1.html#cb42-26" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;Panama&#39;</span>]<span class="op">,</span></span>
<span id="cb42-27"><a href="ee.featurecollection-1.html#cb42-27" aria-hidden="true" tabindex="-1"></a>      <span class="dt">capital</span><span class="op">:</span>  [<span class="st">&#39;cdad. de Guatemala&#39;</span><span class="op">,</span> </span>
<span id="cb42-28"><a href="ee.featurecollection-1.html#cb42-28" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Belmopan&#39;</span><span class="op">,</span> </span>
<span id="cb42-29"><a href="ee.featurecollection-1.html#cb42-29" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Tegucigalpa&#39;</span><span class="op">,</span> </span>
<span id="cb42-30"><a href="ee.featurecollection-1.html#cb42-30" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;San Salvador&#39;</span><span class="op">,</span> </span>
<span id="cb42-31"><a href="ee.featurecollection-1.html#cb42-31" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Managua&#39;</span><span class="op">,</span> </span>
<span id="cb42-32"><a href="ee.featurecollection-1.html#cb42-32" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;San Jose&#39;</span><span class="op">,</span> </span>
<span id="cb42-33"><a href="ee.featurecollection-1.html#cb42-33" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;cdad. de Panama&#39;</span>]})<span class="op">;</span></span>
<span id="cb42-34"><a href="ee.featurecollection-1.html#cb42-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-35"><a href="ee.featurecollection-1.html#cb42-35" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> linea <span class="op">=</span> ee<span class="op">.</span><span class="fu">Feature</span>(ee<span class="op">.</span><span class="at">Geometry</span><span class="op">.</span><span class="fu">LineString</span>([<span class="op">-</span><span class="fl">66.865</span><span class="op">,</span> <span class="fl">10.479</span><span class="op">,</span>                    </span>
<span id="cb42-36"><a href="ee.featurecollection-1.html#cb42-36" aria-hidden="true" tabindex="-1"></a>                            <span class="op">-</span><span class="fl">74.072</span><span class="op">,</span><span class="fl">4.732</span>])<span class="op">,</span></span>
<span id="cb42-37"><a href="ee.featurecollection-1.html#cb42-37" aria-hidden="true" tabindex="-1"></a>        {<span class="dt">pais</span><span class="op">:</span> <span class="st">&#39;Venezuela - Colombia&#39;</span><span class="op">,</span> </span>
<span id="cb42-38"><a href="ee.featurecollection-1.html#cb42-38" aria-hidden="true" tabindex="-1"></a><span class="dt">capital</span><span class="op">:</span> <span class="st">&#39;Caracas - Bogota&#39;</span>})<span class="op">;</span> </span>
<span id="cb42-39"><a href="ee.featurecollection-1.html#cb42-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-40"><a href="ee.featurecollection-1.html#cb42-40" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> Multilinea <span class="op">=</span> ee<span class="op">.</span><span class="fu">Feature</span>(ee<span class="op">.</span><span class="at">Geometry</span><span class="op">.</span><span class="fu">MultiLineString</span>([  </span>
<span id="cb42-41"><a href="ee.featurecollection-1.html#cb42-41" aria-hidden="true" tabindex="-1"></a>    ee<span class="op">.</span><span class="at">Geometry</span><span class="op">.</span><span class="fu">LineString</span>([<span class="op">-</span><span class="fl">76.803</span><span class="op">,</span> <span class="fl">18.021</span><span class="op">,</span> <span class="op">-</span><span class="fl">82.362</span><span class="op">,</span> <span class="fl">23.121</span>])<span class="op">,</span>      </span>
<span id="cb42-42"><a href="ee.featurecollection-1.html#cb42-42" aria-hidden="true" tabindex="-1"></a>    ee<span class="op">.</span><span class="at">Geometry</span><span class="op">.</span><span class="fu">LineString</span>([<span class="op">-</span><span class="fl">72.31</span><span class="op">,</span> <span class="fl">18.69</span><span class="op">,</span> <span class="op">-</span><span class="fl">69.98</span><span class="op">,</span> <span class="fl">18.44</span>])<span class="op">,</span>        </span>
<span id="cb42-43"><a href="ee.featurecollection-1.html#cb42-43" aria-hidden="true" tabindex="-1"></a>    ee<span class="op">.</span><span class="at">Geometry</span><span class="op">.</span><span class="fu">LineString</span>([<span class="op">-</span><span class="fl">66.103</span><span class="op">,</span> <span class="fl">18.4597</span><span class="op">,</span> <span class="op">-</span><span class="fl">61.8558</span><span class="op">,</span> <span class="fl">17.1315</span>])<span class="op">,</span></span>
<span id="cb42-44"><a href="ee.featurecollection-1.html#cb42-44" aria-hidden="true" tabindex="-1"></a>    ee<span class="op">.</span><span class="at">Geometry</span><span class="op">.</span><span class="fu">LineString</span>([<span class="op">-</span><span class="fl">55.165</span><span class="op">,</span> <span class="fl">5.861</span><span class="op">,</span> <span class="op">-</span><span class="fl">58.149</span><span class="op">,</span> <span class="fl">6.822</span>])])<span class="op">,</span></span>
<span id="cb42-45"><a href="ee.featurecollection-1.html#cb42-45" aria-hidden="true" tabindex="-1"></a>    {<span class="dt">pais</span><span class="op">:</span>  [<span class="st">&#39;Jamacia - Cuba&#39;</span><span class="op">,</span></span>
<span id="cb42-46"><a href="ee.featurecollection-1.html#cb42-46" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Haiti - Republica Dominicana&#39;</span><span class="op">,</span></span>
<span id="cb42-47"><a href="ee.featurecollection-1.html#cb42-47" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Puerto Rico - Antigua y Barbuda&#39;</span><span class="op">,</span></span>
<span id="cb42-48"><a href="ee.featurecollection-1.html#cb42-48" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Surinam - Guyana&#39;</span>]<span class="op">,</span></span>
<span id="cb42-49"><a href="ee.featurecollection-1.html#cb42-49" aria-hidden="true" tabindex="-1"></a>    <span class="dt">capital</span><span class="op">:</span>[<span class="st">&#39;Kingston - La Habana&#39;</span><span class="op">,</span></span>
<span id="cb42-50"><a href="ee.featurecollection-1.html#cb42-50" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Puerto Principe - Santo Domingo&#39;</span><span class="op">,</span></span>
<span id="cb42-51"><a href="ee.featurecollection-1.html#cb42-51" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;San Juan - saint John&#39;</span><span class="op">,</span></span>
<span id="cb42-52"><a href="ee.featurecollection-1.html#cb42-52" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Paramaribo - Georgetown&#39;</span>]})<span class="op">;</span></span>
<span id="cb42-53"><a href="ee.featurecollection-1.html#cb42-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-54"><a href="ee.featurecollection-1.html#cb42-54" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> perimetro <span class="op">=</span> ee<span class="op">.</span><span class="fu">Feature</span>(ee<span class="op">.</span><span class="at">Geometry</span><span class="op">.</span><span class="fu">LinearRing</span>([<span class="op">-</span><span class="fl">79.354</span><span class="op">,</span><span class="fl">27.32</span><span class="op">,</span></span>
<span id="cb42-55"><a href="ee.featurecollection-1.html#cb42-55" aria-hidden="true" tabindex="-1"></a>                                   <span class="op">-</span><span class="fl">79.332</span><span class="op">,</span> <span class="fl">23.661</span><span class="op">,</span></span>
<span id="cb42-56"><a href="ee.featurecollection-1.html#cb42-56" aria-hidden="true" tabindex="-1"></a>                                   <span class="op">-</span><span class="fl">74.19</span><span class="op">,</span> <span class="fl">21.161</span><span class="op">,</span></span>
<span id="cb42-57"><a href="ee.featurecollection-1.html#cb42-57" aria-hidden="true" tabindex="-1"></a>                                   <span class="op">-</span><span class="fl">72.235</span><span class="op">,</span> <span class="fl">23.165</span><span class="op">,</span></span>
<span id="cb42-58"><a href="ee.featurecollection-1.html#cb42-58" aria-hidden="true" tabindex="-1"></a>                                   <span class="op">-</span><span class="fl">78.039</span><span class="op">,</span> <span class="fl">27.859</span>])<span class="op">,</span></span>
<span id="cb42-59"><a href="ee.featurecollection-1.html#cb42-59" aria-hidden="true" tabindex="-1"></a>        {<span class="dt">pais</span><span class="op">:</span><span class="st">&#39;Bahamas&#39;</span><span class="op">,</span></span>
<span id="cb42-60"><a href="ee.featurecollection-1.html#cb42-60" aria-hidden="true" tabindex="-1"></a><span class="dt">capital</span><span class="op">:</span> <span class="st">&#39;Nasau&#39;</span>})<span class="op">;</span></span>
<span id="cb42-61"><a href="ee.featurecollection-1.html#cb42-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-62"><a href="ee.featurecollection-1.html#cb42-62" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> rectangulo <span class="op">=</span> ee<span class="op">.</span><span class="fu">Feature</span>(ee<span class="op">.</span><span class="at">Geometry</span><span class="op">.</span><span class="fu">Rectangle</span>(<span class="op">-</span><span class="fl">127.97</span><span class="op">,</span> <span class="fl">50.25</span><span class="op">,</span></span>
<span id="cb42-63"><a href="ee.featurecollection-1.html#cb42-63" aria-hidden="true" tabindex="-1"></a>                                  <span class="op">-</span><span class="fl">68.2</span><span class="op">,</span> <span class="fl">27.63</span>)<span class="op">,</span></span>
<span id="cb42-64"><a href="ee.featurecollection-1.html#cb42-64" aria-hidden="true" tabindex="-1"></a>        {<span class="dt">pais</span><span class="op">:</span><span class="st">&#39;eeuu&#39;</span><span class="op">,</span> </span>
<span id="cb42-65"><a href="ee.featurecollection-1.html#cb42-65" aria-hidden="true" tabindex="-1"></a><span class="dt">capital</span><span class="op">:</span><span class="st">&#39;Washington&#39;</span>})<span class="op">;</span> </span>
<span id="cb42-66"><a href="ee.featurecollection-1.html#cb42-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-67"><a href="ee.featurecollection-1.html#cb42-67" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> poligono <span class="op">=</span> ee<span class="op">.</span><span class="fu">Feature</span>(ee<span class="op">.</span><span class="at">Geometry</span><span class="op">.</span><span class="fu">Polygon</span>(<span class="op">-</span><span class="fl">80.348</span><span class="op">,</span> <span class="op">-</span><span class="fl">3.36</span><span class="op">,</span> <span class="op">-</span><span class="fl">80.348</span><span class="op">,</span> <span class="op">-</span><span class="fl">3.36</span><span class="op">,</span></span>
<span id="cb42-68"><a href="ee.featurecollection-1.html#cb42-68" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span>                             <span class="fl">78.985</span><span class="op">,</span> <span class="op">-</span><span class="fl">5.11</span><span class="op">,</span> <span class="op">-</span><span class="fl">78.019</span><span class="op">,</span> <span class="op">-</span><span class="fl">3.228</span><span class="op">,</span></span>
<span id="cb42-69"><a href="ee.featurecollection-1.html#cb42-69" aria-hidden="true" tabindex="-1"></a>                                <span class="op">-</span><span class="fl">75.99</span><span class="op">,</span> <span class="op">-</span><span class="fl">2.394</span><span class="op">,</span> <span class="op">-</span><span class="fl">75.25</span><span class="op">,</span> <span class="op">-</span><span class="fl">0.901</span><span class="op">,</span></span>
<span id="cb42-70"><a href="ee.featurecollection-1.html#cb42-70" aria-hidden="true" tabindex="-1"></a>                                <span class="op">-</span><span class="fl">75.865</span><span class="op">,</span> <span class="fl">0.11</span><span class="op">,</span> <span class="op">-</span><span class="fl">78.941</span><span class="op">,</span> <span class="fl">1.428</span><span class="op">,</span></span>
<span id="cb42-71"><a href="ee.featurecollection-1.html#cb42-71" aria-hidden="true" tabindex="-1"></a>                                <span class="op">-</span><span class="fl">80.26</span><span class="op">,</span> <span class="fl">0.725</span><span class="op">,</span> <span class="op">-</span><span class="fl">80.919</span><span class="op">,</span> <span class="op">-</span><span class="fl">1.911</span><span class="op">,</span></span>
<span id="cb42-72"><a href="ee.featurecollection-1.html#cb42-72" aria-hidden="true" tabindex="-1"></a>                                <span class="op">-</span><span class="fl">79.776</span><span class="op">,</span> <span class="op">-</span><span class="fl">2.614</span>)<span class="op">,</span></span>
<span id="cb42-73"><a href="ee.featurecollection-1.html#cb42-73" aria-hidden="true" tabindex="-1"></a>{<span class="dt">pais</span><span class="op">:</span><span class="st">&#39;Ecuador&#39;</span><span class="op">,</span> </span>
<span id="cb42-74"><a href="ee.featurecollection-1.html#cb42-74" aria-hidden="true" tabindex="-1"></a><span class="dt">capital</span><span class="op">:</span><span class="st">&#39;Quito&#39;</span>})<span class="op">;</span></span>
<span id="cb42-75"><a href="ee.featurecollection-1.html#cb42-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-76"><a href="ee.featurecollection-1.html#cb42-76" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> Multipoligono <span class="op">=</span> ee<span class="op">.</span><span class="fu">Feature</span>(ee<span class="op">.</span><span class="at">Geometry</span><span class="op">.</span><span class="fu">MultiPolygon</span>([</span>
<span id="cb42-77"><a href="ee.featurecollection-1.html#cb42-77" aria-hidden="true" tabindex="-1"></a>                ee<span class="op">.</span><span class="at">Geometry</span><span class="op">.</span><span class="fu">Polygon</span>([<span class="op">-</span><span class="fl">61.955</span><span class="op">,</span> <span class="fl">10.146</span><span class="op">,</span>         </span>
<span id="cb42-78"><a href="ee.featurecollection-1.html#cb42-78" aria-hidden="true" tabindex="-1"></a>                                        <span class="op">-</span><span class="fl">61.713</span><span class="op">,</span> <span class="fl">10.967</span><span class="op">,</span></span>
<span id="cb42-79"><a href="ee.featurecollection-1.html#cb42-79" aria-hidden="true" tabindex="-1"></a>                                        <span class="op">-</span><span class="fl">60.593</span><span class="op">,</span> <span class="fl">10.881</span><span class="op">,</span></span>
<span id="cb42-80"><a href="ee.featurecollection-1.html#cb42-80" aria-hidden="true" tabindex="-1"></a>                                           <span class="op">-</span><span class="fl">60.68</span><span class="op">,</span> <span class="fl">10.081</span>])<span class="op">,</span></span>
<span id="cb42-81"><a href="ee.featurecollection-1.html#cb42-81" aria-hidden="true" tabindex="-1"></a>                            ee<span class="op">.</span><span class="at">Geometry</span><span class="op">.</span><span class="fu">Polygon</span>([<span class="op">-</span><span class="fl">61.779</span><span class="op">,</span> <span class="fl">12.269</span><span class="op">,</span>     </span>
<span id="cb42-82"><a href="ee.featurecollection-1.html#cb42-82" aria-hidden="true" tabindex="-1"></a>                                       <span class="op">-</span><span class="fl">61.504</span><span class="op">,</span> <span class="fl">12.205</span><span class="op">,</span></span>
<span id="cb42-83"><a href="ee.featurecollection-1.html#cb42-83" aria-hidden="true" tabindex="-1"></a>                                       <span class="op">-</span><span class="fl">61.57</span><span class="op">,</span> <span class="fl">11.968</span><span class="op">,</span></span>
<span id="cb42-84"><a href="ee.featurecollection-1.html#cb42-84" aria-hidden="true" tabindex="-1"></a>                                       <span class="op">-</span><span class="fl">61.845</span><span class="op">,</span> <span class="fl">12.044</span>])<span class="op">,</span></span>
<span id="cb42-85"><a href="ee.featurecollection-1.html#cb42-85" aria-hidden="true" tabindex="-1"></a>                            ee<span class="op">.</span><span class="at">Geometry</span><span class="op">.</span><span class="fu">Polygon</span>([<span class="op">-</span><span class="fl">59.703</span><span class="op">,</span> <span class="fl">13.042</span><span class="op">,</span>         </span>
<span id="cb42-86"><a href="ee.featurecollection-1.html#cb42-86" aria-hidden="true" tabindex="-1"></a>                                       <span class="op">-</span><span class="fl">59.417</span><span class="op">,</span> <span class="fl">13.032</span><span class="op">,</span></span>
<span id="cb42-87"><a href="ee.featurecollection-1.html#cb42-87" aria-hidden="true" tabindex="-1"></a>                                       <span class="op">-</span><span class="fl">59.45</span><span class="op">,</span> <span class="fl">13.32</span><span class="op">,</span></span>
<span id="cb42-88"><a href="ee.featurecollection-1.html#cb42-88" aria-hidden="true" tabindex="-1"></a>                                       <span class="op">-</span><span class="fl">59.736</span><span class="op">,</span> <span class="fl">13.342</span>])<span class="op">,</span></span>
<span id="cb42-89"><a href="ee.featurecollection-1.html#cb42-89" aria-hidden="true" tabindex="-1"></a>                            ee<span class="op">.</span><span class="at">Geometry</span><span class="op">.</span><span class="fu">Polygon</span>([<span class="op">-</span><span class="fl">61.526</span><span class="op">,</span> <span class="fl">15.671</span><span class="op">,</span>          </span>
<span id="cb42-90"><a href="ee.featurecollection-1.html#cb42-90" aria-hidden="true" tabindex="-1"></a>                                       <span class="op">-</span><span class="fl">61.087</span><span class="op">,</span> <span class="fl">15.512</span><span class="op">,</span></span>
<span id="cb42-91"><a href="ee.featurecollection-1.html#cb42-91" aria-hidden="true" tabindex="-1"></a>                                       <span class="op">-</span><span class="fl">61.274</span><span class="op">,</span> <span class="fl">15.194</span><span class="op">,</span></span>
<span id="cb42-92"><a href="ee.featurecollection-1.html#cb42-92" aria-hidden="true" tabindex="-1"></a>                                       <span class="op">-</span><span class="fl">61.438</span><span class="op">,</span> <span class="fl">15.279</span>])])<span class="op">,</span></span>
<span id="cb42-93"><a href="ee.featurecollection-1.html#cb42-93" aria-hidden="true" tabindex="-1"></a>        {<span class="dt">pais</span><span class="op">:</span>[<span class="st">&#39;Trinidad y Tobago&#39;</span><span class="op">,</span></span>
<span id="cb42-94"><a href="ee.featurecollection-1.html#cb42-94" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Granada&#39;</span><span class="op">,</span></span>
<span id="cb42-95"><a href="ee.featurecollection-1.html#cb42-95" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Barbados&#39;</span><span class="op">,</span></span>
<span id="cb42-96"><a href="ee.featurecollection-1.html#cb42-96" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;Dominica&#39;</span>]<span class="op">,</span></span>
<span id="cb42-97"><a href="ee.featurecollection-1.html#cb42-97" aria-hidden="true" tabindex="-1"></a>        <span class="dt">capital</span><span class="op">:</span>[<span class="st">&#39;Puerto España&#39;</span><span class="op">,</span></span>
<span id="cb42-98"><a href="ee.featurecollection-1.html#cb42-98" aria-hidden="true" tabindex="-1"></a>              <span class="st">&#39;Chantimelle&#39;</span><span class="op">,</span></span>
<span id="cb42-99"><a href="ee.featurecollection-1.html#cb42-99" aria-hidden="true" tabindex="-1"></a>              <span class="st">&#39;Bridgetown&#39;</span><span class="op">,</span></span>
<span id="cb42-100"><a href="ee.featurecollection-1.html#cb42-100" aria-hidden="true" tabindex="-1"></a>              <span class="st">&#39;Roseau&#39;</span>]})<span class="op">;</span></span></code></pre></div>
<script type="text/javascript">
// Información adicional para el ejemplo, creación de 
// distintos vectores (ee.Feature),
// cada cual con diferentes tipos de geometrías y distintos
// atributos, esto para mostrar que una ee.FeatureCollection 
// no requiere que todos sus elementos (ee.Feature)
// tengan los mismos atributos ni geometrías


var Punto = ee.Feature(ee.Geometry.Point(-99.1362, 19.4352),
    {pais:'Mexico',capital:'cdmx'});

var Multipunto = ee.Feature(
ee.Geometry.MultiPoint([-90.496, 14.605,                               
                        -88.717, 17.245,                              
                        -87.157, 14.094,
                        -89.2275, 13.6937,
                        -86.273, 12.115
                        -84.097, 9.958
                        -79.527, 8.983]),
    { pais: ['Guatemala', 
        'Belice', 
        'Honduras', 
        'El Salvador', 
        'Nicaragua', 
        'Costa Rica', 
        'Panama'],
      capital:  ['cdad. de Guatemala', 
            'Belmopan', 
            'Tegucigalpa', 
            'San Salvador', 
            'Managua', 
            'San Jose', 
            'cdad. de Panama']});

var linea = ee.Feature(ee.Geometry.LineString([-66.865, 10.479,                    
                            -74.072,4.732]),
        {pais: 'Venezuela - Colombia', 
capital: 'Caracas - Bogota'}); 

var Multilinea = ee.Feature(ee.Geometry.MultiLineString([  
    ee.Geometry.LineString([-76.803, 18.021, -82.362, 23.121]),      
    ee.Geometry.LineString([-72.31, 18.69, -69.98, 18.44]),        
    ee.Geometry.LineString([-66.103, 18.4597, -61.8558, 17.1315]),
    ee.Geometry.LineString([-55.165, 5.861, -58.149, 6.822])]),
    {pais:  ['Jamacia - Cuba',
            'Haiti - Republica Dominicana',
            'Puerto Rico - Antigua y Barbuda',
            'Surinam - Guyana'],
    capital:['Kingston - La Habana',
            'Puerto Principe - Santo Domingo',
            'San Juan - saint John',
            'Paramaribo - Georgetown']});

var perimetro = ee.Feature(ee.Geometry.LinearRing([-79.354,27.32,
                                   -79.332, 23.661,
                                   -74.19, 21.161,
                                   -72.235, 23.165,
                                   -78.039, 27.859]),
        {pais:'Bahamas',
capital: 'Nasau'});

var rectangulo = ee.Feature(ee.Geometry.Rectangle(-127.97, 50.25,
                                  -68.2, 27.63),
        {pais:'eeuu', 
capital:'Washington'}); 

var poligono = ee.Feature(ee.Geometry.Polygon(-80.348, -3.36, -80.348, -3.36,
  -                             78.985, -5.11, -78.019, -3.228,
                                -75.99, -2.394, -75.25, -0.901,
                                -75.865, 0.11, -78.941, 1.428,
                                -80.26, 0.725, -80.919, -1.911,
                                -79.776, -2.614),
{pais:'Ecuador', 
capital:'Quito'});

var Multipoligono = ee.Feature(ee.Geometry.MultiPolygon([
                ee.Geometry.Polygon([-61.955, 10.146,         
                                        -61.713, 10.967,
                                        -60.593, 10.881,
                                           -60.68, 10.081]),
                            ee.Geometry.Polygon([-61.779, 12.269,     
                                       -61.504, 12.205,
                                       -61.57, 11.968,
                                       -61.845, 12.044]),
                            ee.Geometry.Polygon([-59.703, 13.042,         
                                       -59.417, 13.032,
                                       -59.45, 13.32,
                                       -59.736, 13.342]),
                            ee.Geometry.Polygon([-61.526, 15.671,          
                                       -61.087, 15.512,
                                       -61.274, 15.194,
                                       -61.438, 15.279])]),
        {pais:['Trinidad y Tobago',
            'Granada',
            'Barbados',
            'Dominica'],
        capital:['Puerto España',
              'Chantimelle',
              'Bridgetown',
              'Roseau']});
</script>
<div class="sourceCode" id="cb43"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb43-1"><a href="ee.featurecollection-1.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Crear una lista que incluya todos los vectores</span></span>
<span id="cb43-2"><a href="ee.featurecollection-1.html#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> coleccionVectores <span class="op">=</span> ee<span class="op">.</span><span class="fu">FeatureCollection</span>([Multipoligono<span class="op">,</span></span>
<span id="cb43-3"><a href="ee.featurecollection-1.html#cb43-3" aria-hidden="true" tabindex="-1"></a>  poligono<span class="op">,</span></span>
<span id="cb43-4"><a href="ee.featurecollection-1.html#cb43-4" aria-hidden="true" tabindex="-1"></a>  rectangulo<span class="op">,</span></span>
<span id="cb43-5"><a href="ee.featurecollection-1.html#cb43-5" aria-hidden="true" tabindex="-1"></a>  perimetro<span class="op">,</span></span>
<span id="cb43-6"><a href="ee.featurecollection-1.html#cb43-6" aria-hidden="true" tabindex="-1"></a>  Multilínea<span class="op">,</span></span>
<span id="cb43-7"><a href="ee.featurecollection-1.html#cb43-7" aria-hidden="true" tabindex="-1"></a>  linea<span class="op">,</span></span>
<span id="cb43-8"><a href="ee.featurecollection-1.html#cb43-8" aria-hidden="true" tabindex="-1"></a>  Multipunto<span class="op">,</span></span>
<span id="cb43-9"><a href="ee.featurecollection-1.html#cb43-9" aria-hidden="true" tabindex="-1"></a>  Punto])<span class="op">;</span></span></code></pre></div>
<script type="text/javascript">
// Crear una lista que incluya todos los vectores
var coleccionVectores = ee.FeatureCollection([Multipoligono,
  poligono,
  rectangulo,
  perimetro,
  Multilínea,
  linea,
  Multipunto,
  Punto]);
</script>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:f84"></span>
<img src="Img/ej16.png" alt="Visualización de una colección de vectores con objetos con diferentes geometrías, así como su salida en la consola." width="80%" />
<p class="caption">
Figure 8.4: Visualización de una colección de vectores con objetos con diferentes geometrías, así como su salida en la consola.
</p>
</div>
</div>
<div id="visualización-de-colecciones-de-vectores" class="section level2 hasAnchor" number="8.3">
<h2><span class="header-section-number">8.3</span> Visualización de colecciones de vectores<a href="ee.featurecollection-1.html#visualización-de-colecciones-de-vectores" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>
Al igual que los vectores, las colecciones de vectores se pueden agregar a la pantalla de mapa mediante la función <code>Map.addLayer</code> (<span style="color: darkblue;">Fig.</span> <a href="ee.featurecollection-1.html#fig:f85">8.5</a>).</p>
<p>Ejercicio 17</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb44-1"><a href="ee.featurecollection-1.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> ecoregiones <span class="op">=</span> ee<span class="op">.</span><span class="fu">FeatureCollection</span>(<span class="st">&#39;RESOLVE/ECOREGIONS/2017&#39;</span>)<span class="op">;</span></span>
<span id="cb44-2"><a href="ee.featurecollection-1.html#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="ee.featurecollection-1.html#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="co">// Especificar el color de la capa </span></span>
<span id="cb44-4"><a href="ee.featurecollection-1.html#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="bu">Map</span><span class="op">.</span><span class="fu">addLayer</span>(ecoregiones<span class="op">,</span> {}<span class="op">,</span> <span class="st">&#39;capa por default&#39;</span>)<span class="op">;</span></span>
<span id="cb44-5"><a href="ee.featurecollection-1.html#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="bu">Map</span><span class="op">.</span><span class="fu">addLayer</span>(ecoregiones<span class="op">,</span> {<span class="dt">color</span><span class="op">:</span> <span class="st">&#39;2AF116&#39;</span>}<span class="op">,</span> <span class="st">&#39;capa color verde&#39;</span>)<span class="op">;</span></span></code></pre></div>
<script type="text/javascript">
var ecoregiones = ee.FeatureCollection('RESOLVE/ECOREGIONS/2017');

// Especificar el color de la capa 
Map.addLayer(ecoregiones, {}, 'capa por default');
Map.addLayer(ecoregiones, {color: '2AF116'}, 'capa color verde');
</script>
<p>
Además, solo para las colecciones de vectores se pueden especificar parámetros adicionales con el método <code>.draw</code> (el cual transforma la colección de vectores en una imagen y permite así especificar tamaño del punto <code>pointRadius</code> y grosor <code>strokeWidth</code> de la línea). Esto se logra con el método <code>.draw</code> (<span style="color: darkblue;">Fig.</span> <a href="ee.featurecollection-1.html#fig:f85">8.5</a>).</p>
<p>Ejercicio 17.1</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb45-1"><a href="ee.featurecollection-1.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="bu">Map</span><span class="op">.</span><span class="fu">addLayer</span>(ecoregiones<span class="op">.</span><span class="fu">draw</span>({<span class="dt">color</span><span class="op">:</span> <span class="st">&#39;FF6969&#39;</span><span class="op">,</span> <span class="dt">strokeWidth</span><span class="op">:</span><span class="dv">10</span> })<span class="op">,</span> {}<span class="op">,</span></span>
<span id="cb45-2"><a href="ee.featurecollection-1.html#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;capa color rosa, y línea gruesa&#39;</span>)<span class="op">;</span></span></code></pre></div>
<script type="text/javascript">
Map.addLayer(ecoregiones.draw({color: 'FF6969', strokeWidth:10 }), {},
  'capa color rosa, y línea gruesa');
</script>
<p>
Si queremos visualizar solo los contornos de los vectores se puede usar el siguiente código, el cual dibuja con el método <code>.paint</code> los contornos de los vectores sobre una imagen vacía (<code>ee.Image</code>), y luego se visualiza esa imagen (<span style="color: darkblue;">Fig.</span> <a href="ee.featurecollection-1.html#fig:f85">8.5</a>):</p>
<p>Ejercicio 17.2</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb46-1"><a href="ee.featurecollection-1.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Crear una imagen vacía</span></span>
<span id="cb46-2"><a href="ee.featurecollection-1.html#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> vacia <span class="op">=</span> ee<span class="op">.</span><span class="fu">Image</span>()<span class="op">.</span><span class="fu">byte</span>()<span class="op">;</span></span>
<span id="cb46-3"><a href="ee.featurecollection-1.html#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="ee.featurecollection-1.html#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="co">// Sobre la imagen vacía, dibujar los bordes de los vectores</span></span>
<span id="cb46-5"><a href="ee.featurecollection-1.html#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> contornos <span class="op">=</span> vacia<span class="op">.</span><span class="fu">paint</span>({</span>
<span id="cb46-6"><a href="ee.featurecollection-1.html#cb46-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Definir los vectores a dibujar</span></span>
<span id="cb46-7"><a href="ee.featurecollection-1.html#cb46-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">featureCollection</span><span class="op">:</span> ecoregiones<span class="op">,</span>  </span>
<span id="cb46-8"><a href="ee.featurecollection-1.html#cb46-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Definir un atributo de los vectores para agrupar vectores por color </span></span>
<span id="cb46-9"><a href="ee.featurecollection-1.html#cb46-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">// según este atributo (puede omitirse)</span></span>
<span id="cb46-10"><a href="ee.featurecollection-1.html#cb46-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">color</span><span class="op">:</span><span class="st">&#39;BIOME_NUM&#39;</span><span class="op">,</span>  </span>
<span id="cb46-11"><a href="ee.featurecollection-1.html#cb46-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Definir el grosor (si no se especifica este parámetro se dibujarán los   </span></span>
<span id="cb46-12"><a href="ee.featurecollection-1.html#cb46-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">// vectores con color sólido)       </span></span>
<span id="cb46-13"><a href="ee.featurecollection-1.html#cb46-13" aria-hidden="true" tabindex="-1"></a>  <span class="dt">width</span><span class="op">:</span> <span class="dv">3</span>                          </span>
<span id="cb46-14"><a href="ee.featurecollection-1.html#cb46-14" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb46-15"><a href="ee.featurecollection-1.html#cb46-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-16"><a href="ee.featurecollection-1.html#cb46-16" aria-hidden="true" tabindex="-1"></a><span class="co">// Mostrar la imagen con los vectores dibujados y especificar la paleta de</span></span>
<span id="cb46-17"><a href="ee.featurecollection-1.html#cb46-17" aria-hidden="true" tabindex="-1"></a><span class="co">// color (la cual en este caso es de un solo color, por lo tanto, todos los</span></span>
<span id="cb46-18"><a href="ee.featurecollection-1.html#cb46-18" aria-hidden="true" tabindex="-1"></a><span class="co">// contornos serán del mismo color)</span></span>
<span id="cb46-19"><a href="ee.featurecollection-1.html#cb46-19" aria-hidden="true" tabindex="-1"></a><span class="bu">Map</span><span class="op">.</span><span class="fu">addLayer</span>(contornos<span class="op">,</span> {<span class="dt">palette</span><span class="op">:</span> <span class="st">&#39;6e00ff&#39;</span><span class="op">,</span> <span class="dt">max</span><span class="op">:</span> <span class="dv">14</span>}<span class="op">,</span> </span>
<span id="cb46-20"><a href="ee.featurecollection-1.html#cb46-20" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;bordes morados&#39;</span>)<span class="op">;</span> </span>
<span id="cb46-21"><a href="ee.featurecollection-1.html#cb46-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-22"><a href="ee.featurecollection-1.html#cb46-22" aria-hidden="true" tabindex="-1"></a><span class="co">// Mostrar la imagen con los vectores dibujados y especificar la paleta de</span></span>
<span id="cb46-23"><a href="ee.featurecollection-1.html#cb46-23" aria-hidden="true" tabindex="-1"></a><span class="co">// color en una lista [rojo, verde, azul]. Esto permite que los vectores </span></span>
<span id="cb46-24"><a href="ee.featurecollection-1.html#cb46-24" aria-hidden="true" tabindex="-1"></a><span class="co">// se dibujen de diferentes colores según el atributo &#39;color&#39; de la </span></span>
<span id="cb46-25"><a href="ee.featurecollection-1.html#cb46-25" aria-hidden="true" tabindex="-1"></a><span class="co">// variable &#39;contorno&#39;</span></span>
<span id="cb46-26"><a href="ee.featurecollection-1.html#cb46-26" aria-hidden="true" tabindex="-1"></a><span class="bu">Map</span><span class="op">.</span><span class="fu">addLayer</span>(contornos<span class="op">,</span> {<span class="dt">palette</span><span class="op">:</span> [<span class="st">&#39;FF0000&#39;</span><span class="op">,</span> <span class="st">&#39;00FF00&#39;</span><span class="op">,</span> <span class="st">&#39;0000FF&#39;</span>]<span class="op">,</span> </span>
<span id="cb46-27"><a href="ee.featurecollection-1.html#cb46-27" aria-hidden="true" tabindex="-1"></a>  <span class="dt">max</span><span class="op">:</span> <span class="dv">14</span>}<span class="op">,</span> <span class="st">&#39;bordes de colores&#39;</span>)<span class="op">;</span> </span></code></pre></div>
<script type="text/javascript">
// Crear una imagen vacía
var vacia = ee.Image().byte();

// Sobre la imagen vacía, dibujar los bordes de los vectores
var contornos = vacia.paint({
  // Definir los vectores a dibujar
  featureCollection: ecoregiones,  
  // Definir un atributo de los vectores para agrupar vectores por color 
  // según este atributo (puede omitirse)
  color:'BIOME_NUM',  
  // Definir el grosor (si no se especifica este parámetro se dibujarán los   
  // vectores con color sólido)       
  width: 3                          
});

// Mostrar la imagen con los vectores dibujados y especificar la paleta de
// color (la cual en este caso es de un solo color, por lo tanto, todos los
// contornos serán del mismo color)
Map.addLayer(contornos, {palette: '6e00ff', max: 14}, 
  'bordes morados'); 

// Mostrar la imagen con los vectores dibujados y especificar la paleta de
// color en una lista [rojo, verde, azul]. Esto permite que los vectores 
// se dibujen de diferentes colores según el atributo 'color' de la 
// variable 'contorno'
Map.addLayer(contornos, {palette: ['FF0000', '00FF00', '0000FF'], 
  max: 14}, 'bordes de colores'); 
</script>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:f85"></span>
<img src="Img/ej17.png" alt="Diferentes formas de visualizar colecciones de vectores." width="60%" />
<p class="caption">
Figure 8.5: Diferentes formas de visualizar colecciones de vectores.
</p>
</div>
</div>
<div id="métodos-comunes-2" class="section level2 hasAnchor" number="8.4">
<h2><span class="header-section-number">8.4</span> Métodos comunes<a href="ee.featurecollection-1.html#métodos-comunes-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="filtración-de-una-colección-de-vectores" class="section level3 unnumbered hasAnchor">
<h3>Filtración de una colección de vectores<a href="ee.featurecollection-1.html#filtración-de-una-colección-de-vectores" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>
Filtrar una colección de vectores permite seleccionar únicamente los vectores deseados, y se puede filtrar por fecha o por localización. De todas formas, si se necesitan filtros más avanzados se pueden configurar. Para filtrar por localización se usa el método <code>.filterBounds</code>, el cual permite seleccionar todos los vectores de la colección que se intersecten con la geometría indicada por el usuario. En el ejercicio se va a filtrar espacialmente una colección de vectores que contiene las áreas protegidas del mundo para seleccionar únicamente las áreas que se intersecten con un rectángulo que abarca el país de Costa Rica (<span style="color: darkblue;">Fig.</span> <a href="ee.featurecollection-1.html#fig:f86">8.6</a>).</p>
<p>Ejercicio 18</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb47-1"><a href="ee.featurecollection-1.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Tabla dentro de GEE que contiene vectores de áreas protegidas globales</span></span>
<span id="cb47-2"><a href="ee.featurecollection-1.html#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> areasProtegidas <span class="op">=</span> ee<span class="op">.</span><span class="fu">FeatureCollection</span>(<span class="st">&#39;WCMC/WDPA/current/polygons&#39;</span>)<span class="op">;</span> </span>
<span id="cb47-3"><a href="ee.featurecollection-1.html#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="ee.featurecollection-1.html#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co">// Dibujar una geometría (puede ser cualquier tipo de geometría), en este</span></span>
<span id="cb47-5"><a href="ee.featurecollection-1.html#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="co">// caso escogimos un rectángulo sobre Costa Rica)</span></span>
<span id="cb47-6"><a href="ee.featurecollection-1.html#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> RecCostaRica <span class="op">=</span> ee<span class="op">.</span><span class="at">Geometry</span><span class="op">.</span><span class="fu">Rectangle</span>(<span class="op">-</span><span class="fl">86.16</span><span class="op">,</span> <span class="fl">11.235</span><span class="op">,</span> <span class="op">-</span><span class="fl">82.601</span><span class="op">,</span> <span class="fl">8.073</span>)<span class="op">;</span></span>
<span id="cb47-7"><a href="ee.featurecollection-1.html#cb47-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-8"><a href="ee.featurecollection-1.html#cb47-8" aria-hidden="true" tabindex="-1"></a><span class="co">// Áreas protegidas que se intersectan con el rectángulo dibujado</span></span>
<span id="cb47-9"><a href="ee.featurecollection-1.html#cb47-9" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> filtro <span class="op">=</span> areasProtegidas<span class="op">.</span><span class="fu">filterBounds</span>(RecCostaRica)<span class="op">;</span></span></code></pre></div>
<script type="text/javascript">
// Tabla dentro de GEE que contiene vectores de áreas protegidas globales
var areasProtegidas = ee.FeatureCollection('WCMC/WDPA/current/polygons'); 

// Dibujar una geometría (puede ser cualquier tipo de geometría), en este
// caso escogimos un rectángulo sobre Costa Rica)
var RecCostaRica = ee.Geometry.Rectangle(-86.16, 11.235, -82.601, 8.073);

// Áreas protegidas que se intersectan con el rectángulo dibujado
var filtro = areasProtegidas.filterBounds(RecCostaRica);
</script>
<p>
Para filtrar por atributos de los vectores se puede utilizar el método <code>.filterMetadata</code>. De esta forma, todos los vectores de la colección que cumplan con una condición deseada serán seleccionados. Para usar <code>.filterMetadata</code> se debe indicar dentro del paréntesis (separado por comas) el nombre entre comillas del atributo a evaluar y el tipo de comparación a hacer, de acuerdo con ciertos operadores lógicos. Los operadores lógicos aceptados en este método son:</p>
<ul>
<li><code>equals</code> (igual a).</li>
<li><code>less_than</code> (menor que).</li>
<li><code>greater_than</code> (mayor que).</li>
<li><code>not_equals</code> (no igual a o diferente de).</li>
<li><code>not_less_than</code> (no menor que).</li>
<li><code>not_greater_than</code> (no mayor que).</li>
<li><code>starts_with</code> (empieza con).</li>
<li><code>ends_with</code> (termina con).</li>
<li><code>not_starts_with</code> (no empieza con).</li>
<li><code>not_ends_with</code> (no termina con).</li>
<li><code>contains</code> (contiene).</li>
<li><code>not_contains</code> (no contiene).</li>
</ul>
<p>y finalmente el valor con el que se hará la comparación.</p>
<p>En el siguiente ejercicio vamos a filtrar la colección de áreas protegidas según el atributo ‘ISO3’, que es un código de 3 letras para cada país del mundo, en el caso de Costa Rica su código es ‘CRI’ (<span style="color: darkblue;">Fig.</span> <a href="ee.featurecollection-1.html#fig:f86">8.6</a>).</p>
<p>Ejercicio 18.1</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb48-1"><a href="ee.featurecollection-1.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co">// En este caso cada vector de la colección de áreas protegidas tiene un </span></span>
<span id="cb48-2"><a href="ee.featurecollection-1.html#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="co">// atributo llamado &#39;ISO3&#39;; basándonos en ese atributo, vamos a buscar </span></span>
<span id="cb48-3"><a href="ee.featurecollection-1.html#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="co">// todos los vectores que tengan (para ese atributo) un valor exactamente </span></span>
<span id="cb48-4"><a href="ee.featurecollection-1.html#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="co">// igual (&#39;equals&#39;) a &#39;CRI&#39; (abreviación de Costa Rica)</span></span>
<span id="cb48-5"><a href="ee.featurecollection-1.html#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> AreasProCRI <span class="op">=</span> areasProtegidas<span class="op">.</span><span class="fu">filterMetadata</span>(<span class="st">&#39;ISO3&#39;</span><span class="op">,</span><span class="st">&#39;equals&#39;</span><span class="op">,</span><span class="st">&#39;CRI&#39;</span>)<span class="op">;</span> </span></code></pre></div>
<script type="text/javascript">
// En este caso cada vector de la colección de áreas protegidas tiene un 
// atributo llamado 'ISO3'; basándonos en ese atributo, vamos a buscar 
// todos los vectores que tengan (para ese atributo) un valor exactamente 
// igual ('equals') a 'CRI' (abreviación de Costa Rica)
var AreasProCRI = areasProtegidas.filterMetadata('ISO3','equals','CRI'); 
</script>
<p>
El método para filtrar por fecha es <code>.filterDate</code>, sin embargo, este solo se puede utilizar si los vectores tienen un atributo llamado ‘system:time_start’ y en ese atributo se encuentra la fecha en formato ‘AAAA-MM-DD’. En caso de que los vectores no tengan ese atributo pero sí tengan un atributo de fecha, entonces será necesario renombrar dicho atributo de fecha a ‘system:time_start’, para ello se puede usar el método <code>.set</code> y el método <code>.map</code> (el método <code>.map</code> se explicará con mayor detalle más adelante en esta sección).</p>
</div>
<div id="funciones-de-usuario" class="section level3 unnumbered hasAnchor">
<h3>Funciones de usuario<a href="ee.featurecollection-1.html#funciones-de-usuario" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>
En el siguiente ejercicio vamos a crear una función para extraer de cada vector de la colección el valor de año del atributo ‘STATUS_YR’, y guardarlo en un nuevo atributo llamado ‘system:time_start’. Una vez se haya realizado este proceso, procederemos a filtrar las áreas protegidas establecidas entre el 2020 y 2021 (<span style="color: darkblue;">Fig.</span> <a href="ee.featurecollection-1.html#fig:f86">8.6</a>).</p>
<p>Ejercicio 18.2</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb49-1"><a href="ee.featurecollection-1.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Map es un método que nos permite ejecutar una operación sobre todos </span></span>
<span id="cb49-2"><a href="ee.featurecollection-1.html#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="co">// los vectores de la colección</span></span>
<span id="cb49-3"><a href="ee.featurecollection-1.html#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> Areasfecha <span class="op">=</span> AreasProCRI<span class="op">.</span><span class="fu">map</span>( <span class="kw">function</span>(vector){ </span>
<span id="cb49-4"><a href="ee.featurecollection-1.html#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Fecha extrae el valor del atributo &#39;STATUS_YEAR&#39;</span></span>
<span id="cb49-5"><a href="ee.featurecollection-1.html#cb49-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> fecha <span class="op">=</span> vector<span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;STATUS_YR&#39;</span>)<span class="op">;</span>   </span>
<span id="cb49-6"><a href="ee.featurecollection-1.html#cb49-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Cada vector se entrega con una nueva propiedad &#39;system:time_start&#39; </span></span>
<span id="cb49-7"><a href="ee.featurecollection-1.html#cb49-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">// que tiene fecha</span></span>
<span id="cb49-8"><a href="ee.featurecollection-1.html#cb49-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> vector<span class="op">.</span><span class="fu">set</span>(<span class="st">&#39;system:time_start&#39;</span><span class="op">,</span>fecha)</span>
<span id="cb49-9"><a href="ee.featurecollection-1.html#cb49-9" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span> </span>
<span id="cb49-10"><a href="ee.featurecollection-1.html#cb49-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-11"><a href="ee.featurecollection-1.html#cb49-11" aria-hidden="true" tabindex="-1"></a><span class="co">// Ahora ya se puede aplicar el filtro de fecha filtrando solo las áreas </span></span>
<span id="cb49-12"><a href="ee.featurecollection-1.html#cb49-12" aria-hidden="true" tabindex="-1"></a><span class="co">// protegidas de Costa Rica declaradas en el año 2020</span></span>
<span id="cb49-13"><a href="ee.featurecollection-1.html#cb49-13" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> filtroFechas <span class="op">=</span> Areasfecha<span class="op">.</span><span class="fu">filterDate</span>(<span class="dv">2020</span><span class="op">,</span><span class="dv">2021</span>)<span class="op">;</span> </span></code></pre></div>
<script type="text/javascript">
// Map es un método que nos permite ejecutar una operación sobre todos 
// los vectores de la colección
var Areasfecha = AreasProCRI.map( function(vector){ 
  // Fecha extrae el valor del atributo 'STATUS_YEAR'
  var fecha = vector.get('STATUS_YR');   
  // Cada vector se entrega con una nueva propiedad 'system:time_start' 
  // que tiene fecha
  return vector.set('system:time_start',fecha)
}); 

// Ahora ya se puede aplicar el filtro de fecha filtrando solo las áreas 
// protegidas de Costa Rica declaradas en el año 2020
var filtroFechas = Areasfecha.filterDate(2020,2021); 
</script>
<p>
Los filtros compuestos permiten combinar los filtros disponibles bajo la biblioteca de <code>ee.Filter</code>. En el ejercicio 18.3 se mostrará cómo construir un filtro combinado para filtrar vectores que cumplan con todas las condiciones. El ejercicio consta de los siguientes pasos:</p>
<ol style="list-style-type: decimal">
<li>El método <code>.filter</code> es para indicar que vamos a realizar un filtro.</li>
<li><code>ee.Filter.and</code> es para indicar que se deben cumplir todas las condiciones para filtrar.</li>
<li><code>ee.Filter.gte</code> es para seleccionar mediante la condición mayor o igual a (<em>greater than or equal</em>).</li>
<li>Después se utiliza una coma para indicar otro filtro.</li>
<li><code>ee.Filter.stringContains</code> es un filtro para seleccionar de acuerdo a criterios de cadenas de texto que se encuentren como atributos de los vectores.</li>
<li>Después se usa otra coma para indicar otro filtro.</li>
<li><code>ee.Filter.rangeContains</code> es para seleccionar todo lo que se encuentre en un rango de valores (<span style="color: darkblue;">Fig.</span> <a href="ee.featurecollection-1.html#fig:f86">8.6</a>).</li>
</ol>
<p>Ejercicio 18.3</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb50-1"><a href="ee.featurecollection-1.html#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Se declara que se ejecutará un filtro</span></span>
<span id="cb50-2"><a href="ee.featurecollection-1.html#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> areasProMar <span class="op">=</span> areasProtegidas<span class="op">.</span><span class="fu">filter</span>( </span>
<span id="cb50-3"><a href="ee.featurecollection-1.html#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ee.Filter.and indica que se crea un filtro compuesto en donde se </span></span>
<span id="cb50-4"><a href="ee.featurecollection-1.html#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">// deben cumplir TODAS las siguientes condiciones para seleccionar un </span></span>
<span id="cb50-5"><a href="ee.featurecollection-1.html#cb50-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">// vector.</span></span>
<span id="cb50-6"><a href="ee.featurecollection-1.html#cb50-6" aria-hidden="true" tabindex="-1"></a>  ee<span class="op">.</span><span class="at">Filter</span><span class="op">.</span><span class="fu">and</span>(    </span>
<span id="cb50-7"><a href="ee.featurecollection-1.html#cb50-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Un filtro donde se indica el atributo a utilizar (&#39;MARINE&#39;). Este </span></span>
<span id="cb50-8"><a href="ee.featurecollection-1.html#cb50-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">// es un atributo donde 1 es área costera y 2 son áreas marinas.</span></span>
<span id="cb50-9"><a href="ee.featurecollection-1.html#cb50-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Por lo tanto al llamar ee.Filter.gte con el valor 1, se </span></span>
<span id="cb50-10"><a href="ee.featurecollection-1.html#cb50-10" aria-hidden="true" tabindex="-1"></a>  <span class="co">// seleccionarán todas las áreas con un valor de 1 o 2, que indican</span></span>
<span id="cb50-11"><a href="ee.featurecollection-1.html#cb50-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">// áreas que están protegiendo un área marina.</span></span>
<span id="cb50-12"><a href="ee.featurecollection-1.html#cb50-12" aria-hidden="true" tabindex="-1"></a>  ee<span class="op">.</span><span class="at">Filter</span><span class="op">.</span><span class="fu">gte</span>(<span class="st">&#39;MARINE&#39;</span><span class="op">,</span><span class="dv">1</span>)<span class="op">,</span>   </span>
<span id="cb50-13"><a href="ee.featurecollection-1.html#cb50-13" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Se filtran las áreas protegidas que en su atributo &#39;NAME&#39; (el </span></span>
<span id="cb50-14"><a href="ee.featurecollection-1.html#cb50-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">// nombre del área protegida) contengan la  palabra &#39;manglar&#39;, es así</span></span>
<span id="cb50-15"><a href="ee.featurecollection-1.html#cb50-15" aria-hidden="true" tabindex="-1"></a>  <span class="co">// para seleccionar solo las áreas protegidas cuyo nombre incluya </span></span>
<span id="cb50-16"><a href="ee.featurecollection-1.html#cb50-16" aria-hidden="true" tabindex="-1"></a>  <span class="co">// la palabra manglar.</span></span>
<span id="cb50-17"><a href="ee.featurecollection-1.html#cb50-17" aria-hidden="true" tabindex="-1"></a>  ee<span class="op">.</span><span class="at">Filter</span><span class="op">.</span><span class="fu">stringContains</span>(<span class="st">&#39;NAME&#39;</span><span class="op">,</span> <span class="st">&#39;Manglar&#39;</span>)<span class="op">,</span></span>
<span id="cb50-18"><a href="ee.featurecollection-1.html#cb50-18" aria-hidden="true" tabindex="-1"></a>  <span class="co">// &#39;GIS_M_AREA&#39; es un atributo de las áreas protegidas que indica el </span></span>
<span id="cb50-19"><a href="ee.featurecollection-1.html#cb50-19" aria-hidden="true" tabindex="-1"></a>  <span class="co">// área marina protegida calculada con un SIG. El valor mínimo </span></span>
<span id="cb50-20"><a href="ee.featurecollection-1.html#cb50-20" aria-hidden="true" tabindex="-1"></a>  <span class="co">// del rango de área marina que queremos filtrar es 10, mientras que </span></span>
<span id="cb50-21"><a href="ee.featurecollection-1.html#cb50-21" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 100 es el valor máximo.</span></span>
<span id="cb50-22"><a href="ee.featurecollection-1.html#cb50-22" aria-hidden="true" tabindex="-1"></a>  ee<span class="op">.</span><span class="at">Filter</span><span class="op">.</span><span class="fu">rangeContains</span>(<span class="st">&#39;GIS_M_AREA&#39;</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span><span class="dv">100</span>)))<span class="op">;</span> </span></code></pre></div>
<script type="text/javascript">
// Se declara que se ejecutará un filtro
var areasProMar = areasProtegidas.filter( 
  // ee.Filter.and indica que se crea un filtro compuesto en donde se 
  // deben cumplir TODAS las siguientes condiciones para seleccionar un 
  // vector.
  ee.Filter.and(    
  // Un filtro donde se indica el atributo a utilizar ('MARINE'). Este 
  // es un atributo donde 1 es área costera y 2 son áreas marinas.
  // Por lo tanto al llamar ee.Filter.gte con el valor 1, se 
  // seleccionarán todas las áreas con un valor de 1 o 2, que indican
  // áreas que están protegiendo un área marina.
  ee.Filter.gte('MARINE',1),   
  // Se filtran las áreas protegidas que en su atributo 'NAME' (el 
  // nombre del área protegida) contengan la  palabra 'manglar', es así
  // para seleccionar solo las áreas protegidas cuyo nombre incluya 
  // la palabra manglar.
  ee.Filter.stringContains('NAME', 'Manglar'),
  // 'GIS_M_AREA' es un atributo de las áreas protegidas que indica el 
  // área marina protegida calculada con un SIG. El valor mínimo 
  // del rango de área marina que queremos filtrar es 10, mientras que 
  // 100 es el valor máximo.
  ee.Filter.rangeContains('GIS_M_AREA', 10,100))); 
</script>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:f86"></span>
<img src="Img/ej18.png" alt="Visualización de los resultados de diferentes filtros sobre una colección de áreas protegidas." width="80%" />
<p class="caption">
Figure 8.6: Visualización de los resultados de diferentes filtros sobre una colección de áreas protegidas.
</p>
</div>
</div>
<div id="selección-de-atributos" class="section level3 unnumbered hasAnchor">
<h3>Selección de atributos<a href="ee.featurecollection-1.html#selección-de-atributos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>
Al igual que con los vectores, se puede utilizar el método <code>.select</code> para seleccionar un conjunto de atributos de los vectores en la colección. De igual manera que con los vectores individuales, para seleccionar un único atributo solo se requiere indicar su nombre, mientras que si se desea seleccionar varios atributos, estos deben indicarse dentro de una lista. Por ejemplo:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb51-1"><a href="ee.featurecollection-1.html#cb51-1" aria-hidden="true" tabindex="-1"></a>ee<span class="op">.</span><span class="at">FeatureCollection</span><span class="op">.</span><span class="fu">select</span>([<span class="st">&#39;atributo&#39;</span>])<span class="op">;</span></span></code></pre></div>
<script type="text/javascript">
ee.FeatureCollection.select(['atributo']);
</script>
</div>
<div id="creación-de-puntos-aleatorios" class="section level3 unnumbered hasAnchor">
<h3>Creación de puntos aleatorios<a href="ee.featurecollection-1.html#creación-de-puntos-aleatorios" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>
GEE ofrece la herramienta para generar una colección de puntos aleatorios en una región especificada, mediante el método <code>.randomPoints</code>. En ella, especifica el área de interés y la cantidad de puntos deseados (<span style="color: darkblue;">Fig.</span> <a href="ee.featurecollection-1.html#fig:f87">8.7</a>).</p>
<p>Ejercicio 19</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb52-1"><a href="ee.featurecollection-1.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Determinar una región específica donde se quiere lanzar puntos </span></span>
<span id="cb52-2"><a href="ee.featurecollection-1.html#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="co">// aleatorios</span></span>
<span id="cb52-3"><a href="ee.featurecollection-1.html#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> region <span class="op">=</span> ee<span class="op">.</span><span class="at">Geometry</span><span class="op">.</span><span class="fu">Rectangle</span>(<span class="op">-</span><span class="fl">61.36</span><span class="op">,</span> <span class="fl">31.2</span><span class="op">,</span> <span class="op">-</span><span class="fl">16.54</span><span class="op">,</span> <span class="fl">1.93</span>)<span class="op">;</span></span>
<span id="cb52-4"><a href="ee.featurecollection-1.html#cb52-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-5"><a href="ee.featurecollection-1.html#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="co">// Crear 1000 puntos aleatorios en la región especificada</span></span>
<span id="cb52-6"><a href="ee.featurecollection-1.html#cb52-6" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> puntos <span class="op">=</span> ee<span class="op">.</span><span class="at">FeatureCollection</span><span class="op">.</span><span class="fu">randomPoints</span>(region<span class="op">,</span><span class="dv">1000</span>)<span class="op">;</span></span></code></pre></div>
<script type="text/javascript">
// Determinar una región específica donde se quiere lanzar puntos 
// aleatorios
var region = ee.Geometry.Rectangle(-61.36, 31.2, -16.54, 1.93);

// Crear 1000 puntos aleatorios en la región especificada
var puntos = ee.FeatureCollection.randomPoints(region,1000);
</script>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:f87"></span>
<img src="Img/ej19.png" alt="Visualización de los puntos aleatorios creados dentro de un área de interés." width="80%" />
<p class="caption">
Figure 8.7: Visualización de los puntos aleatorios creados dentro de un área de interés.
</p>
</div>
</div>
<div id="obtención-del-primer-vector" class="section level3 unnumbered hasAnchor">
<h3>Obtención del primer vector<a href="ee.featurecollection-1.html#obtención-del-primer-vector" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>
En algunas ocasiones resulta útil obtener el primer vector de una colección de vectores para ver si se llevó a cabo el procedimiento deseado sobre la colección. Para ello, se utiliza el método <code>.first</code>, que devuelve el primer vector que se encuentra en la colección y permite agregarlo en la pantalla de mapa para analizarlo más a detalle. Al usar este método sobre una colección de vectores (<code>ee.FeatureCollection</code>), el resultado devuelto será un vector (<code>ee.Feature</code>, <span style="color: darkblue;">Fig.</span> <a href="ee.featurecollection-1.html#fig:f88">8.8</a>).</p>
<p>Ejercicio 20</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb53-1"><a href="ee.featurecollection-1.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Llamamos una capa de cuencas de alta resolución de GEE</span></span>
<span id="cb53-2"><a href="ee.featurecollection-1.html#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> CUENCAS_MUNDIAL <span class="op">=</span> ee<span class="op">.</span><span class="fu">FeatureCollection</span>(</span>
<span id="cb53-3"><a href="ee.featurecollection-1.html#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;WWF/HydroSHEDS/v1/Basins/hybas_12&#39;</span>)<span class="op">;</span></span>
<span id="cb53-4"><a href="ee.featurecollection-1.html#cb53-4" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb53-5"><a href="ee.featurecollection-1.html#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="co">// Filtramos la colección solo al primer vector y lo convertimos de una</span></span>
<span id="cb53-6"><a href="ee.featurecollection-1.html#cb53-6" aria-hidden="true" tabindex="-1"></a><span class="co">// colección de un solo elemento (ee.FeatureCollection) a un vector </span></span>
<span id="cb53-7"><a href="ee.featurecollection-1.html#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="co">// independiente (ee.Feature)</span></span>
<span id="cb53-8"><a href="ee.featurecollection-1.html#cb53-8" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> cuenca <span class="op">=</span> ee<span class="op">.</span><span class="fu">Feature</span>(CUENCAS_MUNDIAL<span class="op">.</span><span class="fu">first</span>())<span class="op">;</span> </span></code></pre></div>
<script type="text/javascript">
// Llamamos una capa de cuencas de alta resolución de GEE
var CUENCAS_MUNDIAL = ee.FeatureCollection(
  'WWF/HydroSHEDS/v1/Basins/hybas_12');
 
// Filtramos la colección solo al primer vector y lo convertimos de una
// colección de un solo elemento (ee.FeatureCollection) a un vector 
// independiente (ee.Feature)
var cuenca = ee.Feature(CUENCAS_MUNDIAL.first()); 
</script>
</div>
<div id="extracción-de-metadatos-de-una-colección-de-vectores" class="section level3 unnumbered hasAnchor">
<h3>Extracción de metadatos de una colección de vectores<a href="ee.featurecollection-1.html#extracción-de-metadatos-de-una-colección-de-vectores" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>
Para extraer los nombres de los metadatos de una colección de vectores se usa el método <code>.propertyNames</code>, mientras que para extraer algún metadato en particular de una colección de vectores se debe utilizar el método de <code>.get</code>, indicando dentro de los paréntesis el nombre de la propiedad (<span style="color: darkblue;">Fig.</span> <a href="ee.featurecollection-1.html#fig:f88">8.8</a>).</p>
<div class="bluebox2">
<div class="awesomeblock">
<p>Los metadatos de una colección de vectores no son los mismos que los de los vectores que la conforman.</p>
</div>
</div>
<p>Ejercicio 20.1</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb54-1"><a href="ee.featurecollection-1.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Mostrar un metadato de la colección de vectores</span></span>
<span id="cb54-2"><a href="ee.featurecollection-1.html#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> IDcoleccion <span class="op">=</span> CUENCAS_MUNDIAL<span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;system:id&#39;</span>) </span>
<span id="cb54-3"><a href="ee.featurecollection-1.html#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="co">// Se muestran los metadatos de la colección de vectores</span></span>
<span id="cb54-4"><a href="ee.featurecollection-1.html#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> metadatosCOL <span class="op">=</span> CUENCAS_MUNDIAL<span class="op">.</span><span class="fu">propertyNames</span>()</span></code></pre></div>
<script type="text/javascript">
// Mostrar un metadato de la colección de vectores
var IDcoleccion = CUENCAS_MUNDIAL.get('system:id') 
// Se muestran los metadatos de la colección de vectores
var metadatosCOL = CUENCAS_MUNDIAL.propertyNames()
</script>
</div>
<div id="extracción-de-listas-con-atributos-de-vectores" class="section level3 unnumbered hasAnchor">
<h3>Extracción de listas con atributos de vectores<a href="ee.featurecollection-1.html#extracción-de-listas-con-atributos-de-vectores" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>
Para obtener una lista con los atributos de los vectores que conforman una colección de vectores se utiliza el método <code>.aggregate</code>. Este método tiene varias formas de obtener y resumir los atributos de una colección: extraer una propiedad de los vectores (<code>.aggregate_array</code>), extraer y calcular la media por propiedad (<code>.aggregate_mean</code>), extraer y calcular un histograma (<code>.aggregate_histogram</code>), o extraer y obtener estadísticas descriptivas de las propiedades (<code>.aggregate_stats</code>; <span style="color: darkblue;">Fig.</span> <a href="ee.featurecollection-1.html#fig:f88">8.8</a>).</p>
<p>Ejercicio 20.2</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb55-1"><a href="ee.featurecollection-1.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Rectángulo que abarca las islas canarias</span></span>
<span id="cb55-2"><a href="ee.featurecollection-1.html#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> canaria <span class="op">=</span> ee<span class="op">.</span><span class="at">Geometry</span><span class="op">.</span><span class="fu">Rectangle</span>(<span class="op">-</span><span class="fl">18.89</span><span class="op">,</span><span class="fl">27.46</span><span class="op">,</span> <span class="op">-</span><span class="fl">13.26</span><span class="op">,</span><span class="fl">29.93</span>)<span class="op">;</span> </span>
<span id="cb55-3"><a href="ee.featurecollection-1.html#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="co">// Arroja una lista con todos los ID de las cuencas de esta zona</span></span>
<span id="cb55-4"><a href="ee.featurecollection-1.html#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> IDcuencasCana <span class="op">=</span> CUENCAS_MUNDIAL<span class="op">.</span><span class="fu">filterBounds</span>(canaria)</span>
<span id="cb55-5"><a href="ee.featurecollection-1.html#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="op">.</span><span class="fu">aggregate_array</span>(<span class="st">&#39;HYBAS_ID&#39;</span>)<span class="op">;</span></span>
<span id="cb55-6"><a href="ee.featurecollection-1.html#cb55-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-7"><a href="ee.featurecollection-1.html#cb55-7" aria-hidden="true" tabindex="-1"></a><span class="co">// Arroja el dato del área subsuperficial promedio de las cuencas de </span></span>
<span id="cb55-8"><a href="ee.featurecollection-1.html#cb55-8" aria-hidden="true" tabindex="-1"></a><span class="co">// esta zona</span></span>
<span id="cb55-9"><a href="ee.featurecollection-1.html#cb55-9" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> areaCuencasCana <span class="op">=</span> CUENCAS_MUNDIAL<span class="op">.</span><span class="fu">filterBounds</span>(canaria)</span>
<span id="cb55-10"><a href="ee.featurecollection-1.html#cb55-10" aria-hidden="true" tabindex="-1"></a><span class="op">.</span><span class="fu">aggregate_mean</span>(<span class="st">&#39;SUB_AREA&#39;</span>)<span class="op">;</span></span>
<span id="cb55-11"><a href="ee.featurecollection-1.html#cb55-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-12"><a href="ee.featurecollection-1.html#cb55-12" aria-hidden="true" tabindex="-1"></a><span class="co">// Arroja el dato de frecuencias de cada uno de los posibles valores de</span></span>
<span id="cb55-13"><a href="ee.featurecollection-1.html#cb55-13" aria-hidden="true" tabindex="-1"></a><span class="co">// COAST (1=si tiene costa, 0=no tiene costa)</span></span>
<span id="cb55-14"><a href="ee.featurecollection-1.html#cb55-14" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> costaCana <span class="op">=</span> CUENCAS_MUNDIAL<span class="op">.</span><span class="fu">filterBounds</span>(canaria)</span>
<span id="cb55-15"><a href="ee.featurecollection-1.html#cb55-15" aria-hidden="true" tabindex="-1"></a><span class="op">.</span><span class="fu">aggregate_histogram</span>(<span class="st">&#39;COAST&#39;</span>)<span class="op">;</span> </span>
<span id="cb55-16"><a href="ee.featurecollection-1.html#cb55-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-17"><a href="ee.featurecollection-1.html#cb55-17" aria-hidden="true" tabindex="-1"></a><span class="co">// Arroja las estadísticas descriptivas del área superficial de las</span></span>
<span id="cb55-18"><a href="ee.featurecollection-1.html#cb55-18" aria-hidden="true" tabindex="-1"></a><span class="co">// cuencas de la zona</span></span>
<span id="cb55-19"><a href="ee.featurecollection-1.html#cb55-19" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> estadisticas <span class="op">=</span> CUENCAS_MUNDIAL<span class="op">.</span><span class="fu">filterBounds</span>(canaria)</span>
<span id="cb55-20"><a href="ee.featurecollection-1.html#cb55-20" aria-hidden="true" tabindex="-1"></a><span class="op">.</span><span class="fu">aggregate_stats</span>(<span class="st">&#39;UP_AREA&#39;</span>)<span class="op">;</span> </span></code></pre></div>
<script type="text/javascript">
// Rectángulo que abarca las islas canarias
var canaria = ee.Geometry.Rectangle(-18.89,27.46, -13.26,29.93); 
// Arroja una lista con todos los ID de las cuencas de esta zona
var IDcuencasCana = CUENCAS_MUNDIAL.filterBounds(canaria)
.aggregate_array('HYBAS_ID');

// Arroja el dato del área subsuperficial promedio de las cuencas de 
// esta zona
var areaCuencasCana = CUENCAS_MUNDIAL.filterBounds(canaria)
.aggregate_mean('SUB_AREA');

// Arroja el dato de frecuencias de cada uno de los posibles valores de
// COAST (1=si tiene costa, 0=no tiene costa)
var costaCana = CUENCAS_MUNDIAL.filterBounds(canaria)
.aggregate_histogram('COAST'); 

// Arroja las estadísticas descriptivas del área superficial de las
// cuencas de la zona
var estadisticas = CUENCAS_MUNDIAL.filterBounds(canaria)
.aggregate_stats('UP_AREA'); 
</script>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:f88"></span>
<img src="Img/ej20.png" alt="Ejemplos de la salida en la consola de diferentes propiedades de los vectores que forman una colección de vectores de cuencas." width="80%" />
<p class="caption">
Figure 8.8: Ejemplos de la salida en la consola de diferentes propiedades de los vectores que forman una colección de vectores de cuencas.
</p>
</div>
</div>
<div id="ejecución-de-una-función-sobre-todos-los-vectores-de-una-colección" class="section level3 unnumbered hasAnchor">
<h3>Ejecución de una función sobre todos los vectores de una colección<a href="ee.featurecollection-1.html#ejecución-de-una-función-sobre-todos-los-vectores-de-una-colección" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>
Para aplicar una operación en todos los vectores de una colección se usa el método <code>.map</code>.</p>
<div class="bluebox2">
<div class="awesomeblock">
<p>Para poder ejecutar el método <code>.map</code> es necesario definir antes una función (del usuario). Para definir una función es necesario tener en cuenta varias cosas:</p>
<ol style="list-style-type: decimal">
<li>Usar el comando <code>function</code>.</li>
<li>Definir un nombre cualquiera, que representará el objeto de entrada de la función (insumo).</li>
<li>Definir un diccionario dentro del cual se especifiquen los procedimientos a realizar sobre el insumo.</li>
<li>Antes de cerrar el diccionario especificar el producto de salida (resultado de la función) usando el comando <code>return</code>.</li>
</ol>
</div>
</div>
<p>En el siguiente ejercicio se mostrará cómo aplicar una función que permite crear un buffer sobre todos los vectores de una colección de vectores. En este ejercicio se creará un conjunto de puntos aleatorios para Perú, sobre los cuales se crearán los buffers y se agregarán algunos atributos. Para ello, se realizarán los siguientes pasos (<span style="color: darkblue;">Fig.</span> <a href="ee.featurecollection-1.html#fig:f89">8.9</a>):</p>
<ul>
<li>Llamamos a una colección con los límites políticos de los países.</li>
<li>Seleccionamos a ‘Peru’.</li>
<li>Generamos 100 puntos aleatorios en Perú.</li>
<li>Le añadimos a cada punto un nuevo atributo llamado ‘aleatorio’.</li>
<li>Definimos una función del usuario en la que para cada punto se genera un buffer con tamaño aleatorio.</li>
<li>Ejecutamos la función sobre todos los puntos aleatorios.</li>
<li>Usando el método <code>.map</code> ejecutamos la función <code>bufferAleatorio</code> sobre todos los puntos aleatorios.</li>
</ul>
<p>Ejercicio 21
</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb56-1"><a href="ee.featurecollection-1.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Se llama una tabla de GEE con colección de vectores de países </span></span>
<span id="cb56-2"><a href="ee.featurecollection-1.html#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> paises <span class="op">=</span> ee<span class="op">.</span><span class="fu">FeatureCollection</span>(<span class="st">&#39;USDOS/LSIB/2017&#39;</span>)<span class="op">;</span> </span>
<span id="cb56-3"><a href="ee.featurecollection-1.html#cb56-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-4"><a href="ee.featurecollection-1.html#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="co">// Seleccionamos el vector cuyo atributo &#39;COUNTRY_NAME&#39; es igual </span></span>
<span id="cb56-5"><a href="ee.featurecollection-1.html#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="co">// (&#39;equals&#39;) a &#39;Peru&#39;, filtrando así solo a Perú </span></span>
<span id="cb56-6"><a href="ee.featurecollection-1.html#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> peru <span class="op">=</span> paises<span class="op">.</span><span class="fu">filterMetadata</span>(<span class="st">&#39;COUNTRY_NA&#39;</span><span class="op">,</span><span class="st">&#39;equals&#39;</span><span class="op">,</span><span class="st">&#39;Peru&#39;</span>)<span class="op">;</span> </span>
<span id="cb56-7"><a href="ee.featurecollection-1.html#cb56-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-8"><a href="ee.featurecollection-1.html#cb56-8" aria-hidden="true" tabindex="-1"></a><span class="co">// Creamos una colección de vectores de 100 puntos aleatorios en Perú, y </span></span>
<span id="cb56-9"><a href="ee.featurecollection-1.html#cb56-9" aria-hidden="true" tabindex="-1"></a><span class="co">// usando el método .randomColumn le asignamos a cada punto un nuevo </span></span>
<span id="cb56-10"><a href="ee.featurecollection-1.html#cb56-10" aria-hidden="true" tabindex="-1"></a><span class="co">// atributo llamado &#39;aleatorio&#39; cuyo valor es aleatorio (entre 0-1)</span></span>
<span id="cb56-11"><a href="ee.featurecollection-1.html#cb56-11" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> puntos <span class="op">=</span>ee<span class="op">.</span><span class="at">FeatureCollection</span><span class="op">.</span><span class="fu">randomPoints</span>(peru<span class="op">,</span> <span class="dv">100</span>)</span>
<span id="cb56-12"><a href="ee.featurecollection-1.html#cb56-12" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">randomColumn</span>(<span class="st">&#39;aleatorio&#39;</span>)<span class="op">;</span>  </span>
<span id="cb56-13"><a href="ee.featurecollection-1.html#cb56-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-14"><a href="ee.featurecollection-1.html#cb56-14" aria-hidden="true" tabindex="-1"></a><span class="co">// Definimos una función del usuario (con el método function) llamada </span></span>
<span id="cb56-15"><a href="ee.featurecollection-1.html#cb56-15" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;bufferAleatorio&#39; en la que el dato de entrada (insumo) será un </span></span>
<span id="cb56-16"><a href="ee.featurecollection-1.html#cb56-16" aria-hidden="true" tabindex="-1"></a><span class="co">// vector (y el nombre genérico que le asignamos al insumo es (punto)):</span></span>
<span id="cb56-17"><a href="ee.featurecollection-1.html#cb56-17" aria-hidden="true" tabindex="-1"></a><span class="co">// Abrimos un diccionario donde especificaremos los procedimientos a </span></span>
<span id="cb56-18"><a href="ee.featurecollection-1.html#cb56-18" aria-hidden="true" tabindex="-1"></a><span class="co">// realizarle al vector (punto).</span></span>
<span id="cb56-19"><a href="ee.featurecollection-1.html#cb56-19" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> bufferAleatorio <span class="op">=</span> <span class="kw">function</span>(punto){   </span>
<span id="cb56-20"><a href="ee.featurecollection-1.html#cb56-20" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Extraemos el número aleatorio del vector que se encuentra en el </span></span>
<span id="cb56-21"><a href="ee.featurecollection-1.html#cb56-21" aria-hidden="true" tabindex="-1"></a>  <span class="co">// atributo &#39;aleatorio&#39;.</span></span>
<span id="cb56-22"><a href="ee.featurecollection-1.html#cb56-22" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> numero <span class="op">=</span> punto<span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;aleatorio&#39;</span>)<span class="op">;</span>  </span>
<span id="cb56-23"><a href="ee.featurecollection-1.html#cb56-23" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb56-24"><a href="ee.featurecollection-1.html#cb56-24" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Convertimos el número extraído en el paso anterior en un </span></span>
<span id="cb56-25"><a href="ee.featurecollection-1.html#cb56-25" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ee.Number del servidor.</span></span>
<span id="cb56-26"><a href="ee.featurecollection-1.html#cb56-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> NumServidor <span class="op">=</span> ee<span class="op">.</span><span class="fu">Number</span>(numero)<span class="op">;</span>   </span>
<span id="cb56-27"><a href="ee.featurecollection-1.html#cb56-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-28"><a href="ee.featurecollection-1.html#cb56-28" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Multiplicamos ese ee.Number por 100 000.</span></span>
<span id="cb56-29"><a href="ee.featurecollection-1.html#cb56-29" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> multiplicar <span class="op">=</span> NumServidor<span class="op">.</span><span class="fu">multiply</span>(<span class="dv">100000</span>)<span class="op">;</span> </span>
<span id="cb56-30"><a href="ee.featurecollection-1.html#cb56-30" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb56-31"><a href="ee.featurecollection-1.html#cb56-31" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Redondeamos el resultado de la multiplicación en el número entero </span></span>
<span id="cb56-32"><a href="ee.featurecollection-1.html#cb56-32" aria-hidden="true" tabindex="-1"></a>  <span class="co">// mayor o igual más cercano.</span></span>
<span id="cb56-33"><a href="ee.featurecollection-1.html#cb56-33" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> redondear <span class="op">=</span> multiplicar<span class="op">.</span><span class="fu">ceil</span>()<span class="op">;</span> </span>
<span id="cb56-34"><a href="ee.featurecollection-1.html#cb56-34" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb56-35"><a href="ee.featurecollection-1.html#cb56-35" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Creamos un buffer (area) alrededor del vector de entrada de </span></span>
<span id="cb56-36"><a href="ee.featurecollection-1.html#cb56-36" aria-hidden="true" tabindex="-1"></a>  <span class="co">// longitud definida según el número redondeado (redondear).</span></span>
<span id="cb56-37"><a href="ee.featurecollection-1.html#cb56-37" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> area <span class="op">=</span> punto<span class="op">.</span><span class="fu">buffer</span>(redondear)<span class="op">;</span></span>
<span id="cb56-38"><a href="ee.featurecollection-1.html#cb56-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-39"><a href="ee.featurecollection-1.html#cb56-39" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Le asignamos al buffer (area) un nuevo atributo llamado &#39;radio del</span></span>
<span id="cb56-40"><a href="ee.featurecollection-1.html#cb56-40" aria-hidden="true" tabindex="-1"></a>  <span class="co">// buffer&#39; con el número redondeado (metros usados para calcular el </span></span>
<span id="cb56-41"><a href="ee.featurecollection-1.html#cb56-41" aria-hidden="true" tabindex="-1"></a>  <span class="co">// buffer).</span></span>
<span id="cb56-42"><a href="ee.featurecollection-1.html#cb56-42" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> tamaño <span class="op">=</span> area<span class="op">.</span><span class="fu">set</span>(<span class="st">&#39;radio del buffer&#39;</span><span class="op">,</span>redondear)<span class="op">;</span>  </span>
<span id="cb56-43"><a href="ee.featurecollection-1.html#cb56-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-44"><a href="ee.featurecollection-1.html#cb56-44" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Le asignamos al buffer (tamaño) otro atributo llamado &#39;area&#39;, en </span></span>
<span id="cb56-45"><a href="ee.featurecollection-1.html#cb56-45" aria-hidden="true" tabindex="-1"></a>  <span class="co">// donde calculamos el área del buffer usando el método .area.</span></span>
<span id="cb56-46"><a href="ee.featurecollection-1.html#cb56-46" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> circulo <span class="op">=</span> tamaño<span class="op">.</span><span class="fu">set</span>(<span class="st">&#39;area&#39;</span><span class="op">,</span>tamaño<span class="op">.</span><span class="fu">area</span>())<span class="op">;</span>  </span>
<span id="cb56-47"><a href="ee.featurecollection-1.html#cb56-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-48"><a href="ee.featurecollection-1.html#cb56-48" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Usando el método return especificamos que el buffer (circulo) con </span></span>
<span id="cb56-49"><a href="ee.featurecollection-1.html#cb56-49" aria-hidden="true" tabindex="-1"></a>  <span class="co">// los dos nuevos atributos será el resultado de esta función. </span></span>
<span id="cb56-50"><a href="ee.featurecollection-1.html#cb56-50" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> circulo<span class="op">;</span></span>
<span id="cb56-51"><a href="ee.featurecollection-1.html#cb56-51" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb56-52"><a href="ee.featurecollection-1.html#cb56-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-53"><a href="ee.featurecollection-1.html#cb56-53" aria-hidden="true" tabindex="-1"></a><span class="co">// Ejecutamos la función &#39;bufferAleatorio&#39; sobre todos los vectores de la</span></span>
<span id="cb56-54"><a href="ee.featurecollection-1.html#cb56-54" aria-hidden="true" tabindex="-1"></a><span class="co">// colección, cada punto de la colección entonces entrará como insumo de </span></span>
<span id="cb56-55"><a href="ee.featurecollection-1.html#cb56-55" aria-hidden="true" tabindex="-1"></a><span class="co">// la función bufferAleatorio</span></span>
<span id="cb56-56"><a href="ee.featurecollection-1.html#cb56-56" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> circulos <span class="op">=</span> puntos<span class="op">.</span><span class="fu">map</span>(bufferAleatorio)<span class="op">;</span> </span></code></pre></div>
<script type="text/javascript">
// Se llama una tabla de GEE con colección de vectores de países 
var paises = ee.FeatureCollection('USDOS/LSIB/2017'); 

// Seleccionamos el vector cuyo atributo 'COUNTRY_NAME' es igual 
// ('equals') a 'Peru', filtrando así solo a Perú 
var peru = paises.filterMetadata('COUNTRY_NA','equals','Peru'); 

// Creamos una colección de vectores de 100 puntos aleatorios en Perú, y 
// usando el método .randomColumn le asignamos a cada punto un nuevo 
// atributo llamado 'aleatorio' cuyo valor es aleatorio (entre 0-1)
var puntos =ee.FeatureCollection.randomPoints(peru, 100)
  .randomColumn('aleatorio');  

// Definimos una función del usuario (con el método function) llamada 
// 'bufferAleatorio' en la que el dato de entrada (insumo) será un 
// vector (y el nombre genérico que le asignamos al insumo es (punto)):
// Abrimos un diccionario donde especificaremos los procedimientos a 
// realizarle al vector (punto).
var bufferAleatorio = function(punto){   
  // Extraemos el número aleatorio del vector que se encuentra en el 
  // atributo 'aleatorio'.
  var numero = punto.get('aleatorio');  
 
  // Convertimos el número extraído en el paso anterior en un 
  // ee.Number del servidor.
    var NumServidor = ee.Number(numero);   

  // Multiplicamos ese ee.Number por 100 000.
  var multiplicar = NumServidor.multiply(100000); 
 
  // Redondeamos el resultado de la multiplicación en el número entero 
  // mayor o igual más cercano.
  var redondear = multiplicar.ceil(); 
  
  // Creamos un buffer (area) alrededor del vector de entrada de 
  // longitud definida según el número redondeado (redondear).
  var area = punto.buffer(redondear);

  // Le asignamos al buffer (area) un nuevo atributo llamado 'radio del
  // buffer' con el número redondeado (metros usados para calcular el 
  // buffer).
  var tamaño = area.set('radio del buffer',redondear);  

  // Le asignamos al buffer (tamaño) otro atributo llamado 'area', en 
  // donde calculamos el área del buffer usando el método .area.
  var circulo = tamaño.set('area',tamaño.area());  

  // Usando el método return especificamos que el buffer (circulo) con 
  // los dos nuevos atributos será el resultado de esta función. 
  return circulo;
};

// Ejecutamos la función 'bufferAleatorio' sobre todos los vectores de la
// colección, cada punto de la colección entonces entrará como insumo de 
// la función bufferAleatorio
var circulos = puntos.map(bufferAleatorio); 
</script>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:f89"></span>
<img src="Img/ej21.png" alt="Visualización de varios buffers, así como la salida de la consola." width="80%" />
<p class="caption">
Figure 8.9: Visualización de varios buffers, así como la salida de la consola.
</p>
</div>
</div>
<div id="reducción-de-una-colección-de-vectores" class="section level3 unnumbered hasAnchor">
<h3>Reducción de una colección de vectores<a href="ee.featurecollection-1.html#reducción-de-una-colección-de-vectores" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>
Las colecciones también permiten agregar atributos de sus vectores en los metadatos de la colección, esta agregación se llama reducir (reduce). Los reductores de atributos tomarán los valores de un atributo de todos los vectores y los convertirán en un solo valor para toda la colección. Depende del usuario escoger la operación matemática que se utilizará para la reducción, ya sea promedio, mínimo, máximo, mediana, entre otras. Estos reductores entregarán como resultado un diccionario. En el siguiente ejercicio se calculará el área de un conjunto de cuencas en Hawái y se comparará con el área reportada para cada cuenca de acuerdo a la USGS (United States Geological Survey). Por último, se calculará el error cuadrático medio de la diferencia para la colección de vectores. Para ello, se realizarán los siguientes pasos (<span style="color: darkblue;">Fig.</span> <a href="ee.featurecollection-1.html#fig:f810">8.10</a>):
</p>
<ul>
<li>Importamos una capa de cuencas, la filtramos con un rectángulo sobre Hawái.</li>
<li>Definimos una función del usuario (<code>function</code>) llamada ‘areaDife’ en la que el dato de entrada (insumo) será un vector (y el nombre genérico que le asignamos al insumo es (‘cuenca’)).</li>
<li>Abrimos un diccionario donde especificaremos los procedimientos a realizarle al vector (cuenca).</li>
<li>Calculamos el área del vector (con el método <code>.area</code>) y lo dividimos por 1 000 000 para convertir a km<sup>2</sup>.</li>
<li>Con <code>.get</code> extraemos el valor del atributo ‘areasqkm’ (el cual es una cadena de texto).</li>
<li>Con <code>.parse</code> convertimos el valor extraído anteriormente a un número del servidor (<code>ee.Number</code>).</li>
<li>Usando el método <code>.subtract</code> restamos el área calculada con el método <code>.area</code> menos el área reportada según el atributo del vector.</li>
<li>Usando el método <code>return</code> especificamos que el vector sea devuelto con un nuevo atributo llamado ‘diferencia’ (el cual contiene el valor de la resta elevado al cuadrado usando el método <code>.pow</code>).</li>
<li>Ejecutamos la función ‘areaDife’ sobre todos los vectores de la colección <code>cuencasHawaii</code>.</li>
<li>Usando el método <code>.reduceColumns</code> declaramos que usaremos un reductor sobre toda la colección enfocándonos en un atributo de los vectores.</li>
<li>Con <code>ee.Reducer.mean</code> declaramos que el reductor a utilizar será uno de promedio, por lo que el resultado será el promedio del atributo ‘diferencia’.</li>
<li>Con <code>.get</code> extraemos el valor del reductor que por defecto se llama ‘mean’.</li>
<li>Con <code>.sqrt</code> calculamos la raíz cuadrada del promedio calculado.</li>
</ul>
<p>Ejercicio 22
</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb57-1"><a href="ee.featurecollection-1.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Importar una capa de cuencas</span></span>
<span id="cb57-2"><a href="ee.featurecollection-1.html#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> cuencasHawaii <span class="op">=</span> ee<span class="op">.</span><span class="fu">FeatureCollection</span>(<span class="st">&#39;USGS/WBD/2017/HUC06&#39;</span>)</span>
<span id="cb57-3"><a href="ee.featurecollection-1.html#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">filterBounds</span>(ee<span class="op">.</span><span class="at">Geometry</span><span class="op">.</span><span class="fu">Rectangle</span>(<span class="op">-</span><span class="fl">160.969</span><span class="op">,</span> <span class="fl">23.104</span><span class="op">,</span> <span class="op">-</span><span class="fl">154.136</span><span class="op">,</span> <span class="fl">18.733</span>))<span class="op">;</span></span>
<span id="cb57-4"><a href="ee.featurecollection-1.html#cb57-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-5"><a href="ee.featurecollection-1.html#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="co">// Definir una función que ejecute la diferencia entre el área reportada </span></span>
<span id="cb57-6"><a href="ee.featurecollection-1.html#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="co">// en el atributo vector y la calculada en GEE</span></span>
<span id="cb57-7"><a href="ee.featurecollection-1.html#cb57-7" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> areaDife <span class="op">=</span> <span class="kw">function</span>(cuenca) {</span>
<span id="cb57-8"><a href="ee.featurecollection-1.html#cb57-8" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb57-9"><a href="ee.featurecollection-1.html#cb57-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> area <span class="op">=</span> cuenca<span class="op">.</span><span class="fu">area</span>()<span class="op">.</span><span class="fu">divide</span>(<span class="dv">1000000</span>)<span class="op">;</span></span>
<span id="cb57-10"><a href="ee.featurecollection-1.html#cb57-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> dife <span class="op">=</span> area<span class="op">.</span><span class="fu">subtract</span>(ee<span class="op">.</span><span class="at">Number</span><span class="op">.</span><span class="fu">parse</span>(cuenca<span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;areasqkm&#39;</span>)))<span class="op">;</span></span>
<span id="cb57-11"><a href="ee.featurecollection-1.html#cb57-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> cuenca<span class="op">.</span><span class="fu">set</span>(<span class="st">&#39;diferencia&#39;</span><span class="op">,</span> dife<span class="op">.</span><span class="fu">pow</span>(<span class="dv">2</span>))<span class="op">;</span></span>
<span id="cb57-12"><a href="ee.featurecollection-1.html#cb57-12" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb57-13"><a href="ee.featurecollection-1.html#cb57-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-14"><a href="ee.featurecollection-1.html#cb57-14" aria-hidden="true" tabindex="-1"></a><span class="co">// Calcular el error cuadrático medio de toda la colección.</span></span>
<span id="cb57-15"><a href="ee.featurecollection-1.html#cb57-15" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> RECM <span class="op">=</span> ee<span class="op">.</span><span class="fu">Number</span>(</span>
<span id="cb57-16"><a href="ee.featurecollection-1.html#cb57-16" aria-hidden="true" tabindex="-1"></a>  cuencasHawaii<span class="op">.</span><span class="fu">map</span>(areaDife)</span>
<span id="cb57-17"><a href="ee.featurecollection-1.html#cb57-17" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">reduceColumns</span>(ee<span class="op">.</span><span class="at">Reducer</span><span class="op">.</span><span class="fu">mean</span>()<span class="op">,</span> [<span class="st">&#39;diferencia&#39;</span>])</span>
<span id="cb57-18"><a href="ee.featurecollection-1.html#cb57-18" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;mean&#39;</span>))<span class="op">.</span><span class="fu">sqrt</span>()<span class="op">;</span></span></code></pre></div>
<script type="text/javascript">
// Importar una capa de cuencas
var cuencasHawaii = ee.FeatureCollection('USGS/WBD/2017/HUC06')
  .filterBounds(ee.Geometry.Rectangle(-160.969, 23.104, -154.136, 18.733));

// Definir una función que ejecute la diferencia entre el área reportada 
// en el atributo vector y la calculada en GEE
var areaDife = function(cuenca) {
 
  var area = cuenca.area().divide(1000000);
  var dife = area.subtract(ee.Number.parse(cuenca.get('areasqkm')));
  return cuenca.set('diferencia', dife.pow(2));
};

// Calcular el error cuadrático medio de toda la colección.
var RECM = ee.Number(
  cuencasHawaii.map(areaDife)
  .reduceColumns(ee.Reducer.mean(), ['diferencia'])
  .get('mean')).sqrt();
</script>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:f810"></span>
<img src="Img/ej22.png" alt="Vista en la consola del error cuadrático medio calculado entre el área calculada directamente en GEE y el reportado por la fuente de datos utilizada." width="80%" />
<p class="caption">
Figure 8.10: Vista en la consola del error cuadrático medio calculado entre el área calculada directamente en GEE y el reportado por la fuente de datos utilizada.
</p>
</div>
<p>También se puede usar una colección de vectores para reducir la información de una imagen. Este procedimiento se revisa con mayor detalle en el capítulo 11. Sin embargo, por el momento se ejemplifica cómo obtener el valor de la suma de algunas variables climáticas (datos de WorldClim) en formato ráster para dos cuencas en Puerto Rico (objetos de tipo vector). En este caso se realizará el siguiente procedimiento (<span style="color: darkblue;">Fig.</span> <a href="ee.featurecollection-1.html#fig:f811">8.11</a>):</p>
<ul>
<li>Filtrar las cuencas de Puerto Rico.</li>
<li>Obtener la suma de los valores de todos los píxeles que caigan en cada cuenca.</li>
</ul>
<p>Ejercicio 23
</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb58-1"><a href="ee.featurecollection-1.html#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Importar una imagen de clima de WorldClim</span></span>
<span id="cb58-2"><a href="ee.featurecollection-1.html#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> clima <span class="op">=</span> ee<span class="op">.</span><span class="fu">Image</span>(<span class="st">&#39;WORLDCLIM/V1/BIO&#39;</span>)<span class="op">;</span></span>
<span id="cb58-3"><a href="ee.featurecollection-1.html#cb58-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-4"><a href="ee.featurecollection-1.html#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="co">// Importar una capa de cuencas y filtrar las cuencas con un rectángulo </span></span>
<span id="cb58-5"><a href="ee.featurecollection-1.html#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="co">// sobre Puerto Rico.</span></span>
<span id="cb58-6"><a href="ee.featurecollection-1.html#cb58-6" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> cuencasPuertorRico <span class="op">=</span> ee<span class="op">.</span><span class="fu">FeatureCollection</span>(<span class="st">&#39;USGS/WBD/2017/HUC06&#39;</span>)</span>
<span id="cb58-7"><a href="ee.featurecollection-1.html#cb58-7" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">filterBounds</span>(ee<span class="op">.</span><span class="at">Geometry</span><span class="op">.</span><span class="fu">Rectangle</span>(<span class="op">-</span><span class="fl">79.906</span><span class="op">,</span> <span class="fl">25.196</span><span class="op">,</span> <span class="op">-</span><span class="fl">59.6</span><span class="op">,</span> <span class="fl">9.776</span>))<span class="op">;</span></span>
<span id="cb58-8"><a href="ee.featurecollection-1.html#cb58-8" aria-hidden="true" tabindex="-1"></a><span class="co">// Usando el método .reduceRegions declaramos que usaremos un reductor </span></span>
<span id="cb58-9"><a href="ee.featurecollection-1.html#cb58-9" aria-hidden="true" tabindex="-1"></a><span class="co">// espacial en el área de las cuencas de Puerto Rico.</span></span>
<span id="cb58-10"><a href="ee.featurecollection-1.html#cb58-10" aria-hidden="true" tabindex="-1"></a><span class="co">// Con ee.Reducer.sum especificamos que se desea obtener la suma</span></span>
<span id="cb58-11"><a href="ee.featurecollection-1.html#cb58-11" aria-hidden="true" tabindex="-1"></a><span class="co">// de los valores de los atributos de todos los píxeles que caigan en </span></span>
<span id="cb58-12"><a href="ee.featurecollection-1.html#cb58-12" aria-hidden="true" tabindex="-1"></a><span class="co">// cada vector.</span></span>
<span id="cb58-13"><a href="ee.featurecollection-1.html#cb58-13" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> cuencaClima <span class="op">=</span> clima<span class="op">.</span><span class="fu">reduceRegions</span>(cuencasPuertorRico<span class="op">,</span> ee<span class="op">.</span><span class="at">Reducer</span><span class="op">.</span><span class="fu">sum</span>())<span class="op">;</span></span></code></pre></div>
<script type="text/javascript">
// Importar una imagen de clima de WorldClim
var clima = ee.Image('WORLDCLIM/V1/BIO');

// Importar una capa de cuencas y filtrar las cuencas con un rectángulo 
// sobre Puerto Rico.
var cuencasPuertorRico = ee.FeatureCollection('USGS/WBD/2017/HUC06')
  .filterBounds(ee.Geometry.Rectangle(-79.906, 25.196, -59.6, 9.776));
// Usando el método .reduceRegions declaramos que usaremos un reductor 
// espacial en el área de las cuencas de Puerto Rico.
// Con ee.Reducer.sum especificamos que se desea obtener la suma
// de los valores de los atributos de todos los píxeles que caigan en 
// cada vector.
var cuencaClima = clima.reduceRegions(cuencasPuertorRico, ee.Reducer.sum());
</script>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:f811"></span>
<img src="Img/ej23.png" alt="Visualización y salida de la consola de la consulta realizada sobre una imagen de variables climáticas utilizando la extensión espacial de una colección de vectores." width="80%" />
<p class="caption">
Figure 8.11: Visualización y salida de la consola de la consulta realizada sobre una imagen de variables climáticas utilizando la extensión espacial de una colección de vectores.
</p>
</div>
</div>
<div id="conversión-de-una-colección-de-vectores-en-una-imagen" class="section level3 unnumbered hasAnchor">
<h3>Conversión de una colección de vectores en una imagen<a href="ee.featurecollection-1.html#conversión-de-una-colección-de-vectores-en-una-imagen" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>
Para rasterizar un vector se usa el método <code>.reduceToImage</code>. Este método asigna bajo cada vector los píxeles del valor del atributo especificado. Para usar <code>.reduceToImage</code> indicamos el atributo que corresponderá al valor de los píxeles del ráster como ‘area’. Por último, con el método <code>ee.Reducer.first</code> especificamos que el primer valor que encuentre en ese atributo sea asignado al valor del píxel (<span style="color: darkblue;">Fig.</span> <a href="ee.featurecollection-1.html#fig:f812">8.12</a>).</p>
<p>Ejercicio 24
</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb59-1"><a href="ee.featurecollection-1.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Definir un área en la Antártida</span></span>
<span id="cb59-2"><a href="ee.featurecollection-1.html#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> rectangulo <span class="op">=</span> ee<span class="op">.</span><span class="at">Geometry</span><span class="op">.</span><span class="fu">Rectangle</span>(<span class="op">-</span><span class="fl">158.63</span><span class="op">,-</span><span class="fl">81.47</span><span class="op">,-</span><span class="fl">40.51</span><span class="op">,-</span><span class="fl">59.12</span>)<span class="op">;</span></span>
<span id="cb59-3"><a href="ee.featurecollection-1.html#cb59-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-4"><a href="ee.featurecollection-1.html#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="co">// Importar una colección de vectores de GEe con datos de glaciares</span></span>
<span id="cb59-5"><a href="ee.featurecollection-1.html#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> hielo <span class="op">=</span> ee<span class="op">.</span><span class="fu">FeatureCollection</span>(<span class="st">&#39;GLIMS/current&#39;</span>)<span class="op">.</span><span class="fu">filterBounds</span>(rectangulo)<span class="op">;</span></span>
<span id="cb59-6"><a href="ee.featurecollection-1.html#cb59-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-7"><a href="ee.featurecollection-1.html#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="co">// Crear una imagen ráster de las áreas de los glaciares.</span></span>
<span id="cb59-8"><a href="ee.featurecollection-1.html#cb59-8" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> areaGlaciar <span class="op">=</span> hielo</span>
<span id="cb59-9"><a href="ee.featurecollection-1.html#cb59-9" aria-hidden="true" tabindex="-1"></a><span class="co">// Seleccionar vectores cuyo atributo área no esté vacío</span></span>
<span id="cb59-10"><a href="ee.featurecollection-1.html#cb59-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">filter</span>(ee<span class="op">.</span><span class="at">Filter</span><span class="op">.</span><span class="fu">notNull</span>([<span class="st">&#39;area&#39;</span>])) </span>
<span id="cb59-11"><a href="ee.featurecollection-1.html#cb59-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb59-12"><a href="ee.featurecollection-1.html#cb59-12" aria-hidden="true" tabindex="-1"></a><span class="co">// Rasterizar  </span></span>
<span id="cb59-13"><a href="ee.featurecollection-1.html#cb59-13" aria-hidden="true" tabindex="-1"></a><span class="op">.</span><span class="fu">reduceToImage</span>({</span>
<span id="cb59-14"><a href="ee.featurecollection-1.html#cb59-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Atributo del vector para rasterizar</span></span>
<span id="cb59-15"><a href="ee.featurecollection-1.html#cb59-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">properties</span><span class="op">:</span> [<span class="st">&#39;area&#39;</span>]<span class="op">,</span> </span>
<span id="cb59-16"><a href="ee.featurecollection-1.html#cb59-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Tomar el primer valor</span></span>
<span id="cb59-17"><a href="ee.featurecollection-1.html#cb59-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">reducer</span><span class="op">:</span> ee<span class="op">.</span><span class="at">Reducer</span><span class="op">.</span><span class="fu">first</span>()  </span>
<span id="cb59-18"><a href="ee.featurecollection-1.html#cb59-18" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span></code></pre></div>
<script type="text/javascript">
// Definir un área en la Antártida
var rectangulo = ee.Geometry.Rectangle(-158.63,-81.47,-40.51,-59.12);

// Importar una colección de vectores de GEe con datos de glaciares
var hielo = ee.FeatureCollection('GLIMS/current').filterBounds(rectangulo);

// Crear una imagen ráster de las áreas de los glaciares.
var areaGlaciar = hielo
// Seleccionar vectores cuyo atributo área no esté vacío
    .filter(ee.Filter.notNull(['area'])) 
    
// Rasterizar  
.reduceToImage({
    // Atributo del vector para rasterizar
    properties: ['area'], 
    // Tomar el primer valor
    reducer: ee.Reducer.first()  
    });
</script>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:f812"></span>
<img src="Img/ej24.png" alt="Visualización de la transformación de una colección de vectores a imagen." width="80%" />
<p class="caption">
Figure 8.12: Visualización de la transformación de una colección de vectores a imagen.
</p>
</div>
</div>
<div id="unión-de-colecciones-de-vectores" class="section level3 unnumbered hasAnchor">
<h3>Unión de colecciones de vectores<a href="ee.featurecollection-1.html#unión-de-colecciones-de-vectores" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>
Para unir diferentes colecciones de vectores mediante los valores de sus atributos se usan las funciones de <code>ee.Join</code>. El resultado de estas funciones suele constar de una colección de vectores que contendrá los atributos de otra colección de vectores. Para determinar el tipo de relación entre los atributos de los vectores de ambas colecciones se utiliza un filtro (<code>ee.Filter</code>).</p>
<p>Adicionalmente, se debe definir el tipo de unión a realizar entre los vectores. Los diferentes tipos de uniones se pueden consultar en la biblioteca <code>ee.Join</code>. En el siguiente ejercicio realizaremos un tipo de unión espacial de tipo <code>saveALL</code>, pero lo usaremos con dos filtros diferentes (uno de intersección y otro de distancia).</p>
<p>En este ejercicio se busca saber cuáles áreas protegidas se encuentran a menos de 10 km de una planta de energía y ver cuáles áreas protegidas tienen una planta de energía dentro de sus límites (<span style="color: darkblue;">Fig.</span> <a href="ee.featurecollection-1.html#fig:f813">8.13</a>).</p>
<p>Ejercicio 25
</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb60-1"><a href="ee.featurecollection-1.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Importar una colección de vectores: áreas protegidas de Guatemala</span></span>
<span id="cb60-2"><a href="ee.featurecollection-1.html#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> APGuatemala <span class="op">=</span> ee<span class="op">.</span><span class="fu">FeatureCollection</span>(<span class="st">&#39;WCMC/WDPA/current/polygons&#39;</span>)</span>
<span id="cb60-3"><a href="ee.featurecollection-1.html#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">filter</span>(ee<span class="op">.</span><span class="at">Filter</span><span class="op">.</span><span class="fu">eq</span>(<span class="st">&#39;PARENT_ISO&#39;</span><span class="op">,</span> <span class="st">&#39;GTM&#39;</span>))<span class="op">;</span></span>
<span id="cb60-4"><a href="ee.featurecollection-1.html#cb60-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-5"><a href="ee.featurecollection-1.html#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="co">// Importar otra colección de vectores plantas de energía</span></span>
<span id="cb60-6"><a href="ee.featurecollection-1.html#cb60-6" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> plantas <span class="op">=</span> ee<span class="op">.</span><span class="fu">FeatureCollection</span>(<span class="st">&#39;WRI/GPPD/power_plants&#39;</span>)<span class="op">;</span></span>
<span id="cb60-7"><a href="ee.featurecollection-1.html#cb60-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-8"><a href="ee.featurecollection-1.html#cb60-8" aria-hidden="true" tabindex="-1"></a><span class="co">// Define un filtro espacial con distancia de 10 km. El .geo se utiliza </span></span>
<span id="cb60-9"><a href="ee.featurecollection-1.html#cb60-9" aria-hidden="true" tabindex="-1"></a><span class="co">// para indicar que se comparan geometrías</span></span>
<span id="cb60-10"><a href="ee.featurecollection-1.html#cb60-10" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> distFiltro <span class="op">=</span> ee<span class="op">.</span><span class="at">Filter</span><span class="op">.</span><span class="fu">withinDistance</span>({</span>
<span id="cb60-11"><a href="ee.featurecollection-1.html#cb60-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">distance</span><span class="op">:</span> <span class="dv">10000</span><span class="op">,</span></span>
<span id="cb60-12"><a href="ee.featurecollection-1.html#cb60-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Geometría de la primera colección</span></span>
<span id="cb60-13"><a href="ee.featurecollection-1.html#cb60-13" aria-hidden="true" tabindex="-1"></a>  <span class="dt">leftField</span><span class="op">:</span> <span class="st">&#39;.geo&#39;</span><span class="op">,</span> </span>
<span id="cb60-14"><a href="ee.featurecollection-1.html#cb60-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Geometría de la segunda colección</span></span>
<span id="cb60-15"><a href="ee.featurecollection-1.html#cb60-15" aria-hidden="true" tabindex="-1"></a>  <span class="dt">rightField</span><span class="op">:</span> <span class="st">&#39;.geo&#39;</span><span class="op">,</span> </span>
<span id="cb60-16"><a href="ee.featurecollection-1.html#cb60-16" aria-hidden="true" tabindex="-1"></a>  <span class="dt">maxError</span><span class="op">:</span> <span class="dv">10</span></span>
<span id="cb60-17"><a href="ee.featurecollection-1.html#cb60-17" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb60-18"><a href="ee.featurecollection-1.html#cb60-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-19"><a href="ee.featurecollection-1.html#cb60-19" aria-hidden="true" tabindex="-1"></a><span class="co">// Define un filtro espacial de intersección, el .geo se utiliza para </span></span>
<span id="cb60-20"><a href="ee.featurecollection-1.html#cb60-20" aria-hidden="true" tabindex="-1"></a><span class="co">// indicar que se compararán geometrías</span></span>
<span id="cb60-21"><a href="ee.featurecollection-1.html#cb60-21" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> interFiltro <span class="op">=</span> ee<span class="op">.</span><span class="at">Filter</span><span class="op">.</span><span class="fu">intersects</span>({</span>
<span id="cb60-22"><a href="ee.featurecollection-1.html#cb60-22" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Geometría de la primera colección</span></span>
<span id="cb60-23"><a href="ee.featurecollection-1.html#cb60-23" aria-hidden="true" tabindex="-1"></a>  <span class="dt">leftField</span><span class="op">:</span> <span class="st">&#39;.geo&#39;</span><span class="op">,</span> </span>
<span id="cb60-24"><a href="ee.featurecollection-1.html#cb60-24" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Geometría de la segunda colección</span></span>
<span id="cb60-25"><a href="ee.featurecollection-1.html#cb60-25" aria-hidden="true" tabindex="-1"></a>  <span class="dt">rightField</span><span class="op">:</span> <span class="st">&#39;.geo&#39;</span><span class="op">,</span> </span>
<span id="cb60-26"><a href="ee.featurecollection-1.html#cb60-26" aria-hidden="true" tabindex="-1"></a>  <span class="dt">maxError</span><span class="op">:</span> <span class="fl">0.1</span></span>
<span id="cb60-27"><a href="ee.featurecollection-1.html#cb60-27" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb60-28"><a href="ee.featurecollection-1.html#cb60-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-29"><a href="ee.featurecollection-1.html#cb60-29" aria-hidden="true" tabindex="-1"></a><span class="co">// Definir la forma de unión el Join</span></span>
<span id="cb60-30"><a href="ee.featurecollection-1.html#cb60-30" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> Union <span class="op">=</span> ee<span class="op">.</span><span class="at">Join</span><span class="op">.</span><span class="fu">saveAll</span>({</span>
<span id="cb60-31"><a href="ee.featurecollection-1.html#cb60-31" aria-hidden="true" tabindex="-1"></a>  <span class="dt">matchesKey</span><span class="op">:</span> <span class="st">&#39;plantas_energia_PA&#39;</span><span class="op">,</span></span>
<span id="cb60-32"><a href="ee.featurecollection-1.html#cb60-32" aria-hidden="true" tabindex="-1"></a>  <span class="dt">measureKey</span><span class="op">:</span> <span class="st">&#39;metros&#39;</span></span>
<span id="cb60-33"><a href="ee.featurecollection-1.html#cb60-33" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb60-34"><a href="ee.featurecollection-1.html#cb60-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-35"><a href="ee.featurecollection-1.html#cb60-35" aria-hidden="true" tabindex="-1"></a><span class="co">// Ejecutar la unión por distancia</span></span>
<span id="cb60-36"><a href="ee.featurecollection-1.html#cb60-36" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> AP_cerca_PE <span class="op">=</span> Union<span class="op">.</span><span class="fu">apply</span>(APGuatemala<span class="op">,</span> plantas<span class="op">,</span> distFiltro)<span class="op">;</span></span>
<span id="cb60-37"><a href="ee.featurecollection-1.html#cb60-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-38"><a href="ee.featurecollection-1.html#cb60-38" aria-hidden="true" tabindex="-1"></a><span class="co">// Ejecutar la unión por intersección</span></span>
<span id="cb60-39"><a href="ee.featurecollection-1.html#cb60-39" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> AP_dentro_PE <span class="op">=</span> Union<span class="op">.</span><span class="fu">apply</span>(APGuatemala<span class="op">,</span> plantas<span class="op">,</span> interFiltro)<span class="op">;</span></span></code></pre></div>
<script type="text/javascript">
// Importar una colección de vectores: áreas protegidas de Guatemala
var APGuatemala = ee.FeatureCollection('WCMC/WDPA/current/polygons')
  .filter(ee.Filter.eq('PARENT_ISO', 'GTM'));

// Importar otra colección de vectores plantas de energía
var plantas = ee.FeatureCollection('WRI/GPPD/power_plants');

// Define un filtro espacial con distancia de 10 km. El .geo se utiliza 
// para indicar que se comparan geometrías
var distFiltro = ee.Filter.withinDistance({
  distance: 10000,
  // Geometría de la primera colección
  leftField: '.geo', 
  // Geometría de la segunda colección
  rightField: '.geo', 
  maxError: 10
});

// Define un filtro espacial de intersección, el .geo se utiliza para 
// indicar que se compararán geometrías
var interFiltro = ee.Filter.intersects({
  // Geometría de la primera colección
  leftField: '.geo', 
  // Geometría de la segunda colección
  rightField: '.geo', 
  maxError: 0.1
});

// Definir la forma de unión el Join
var Union = ee.Join.saveAll({
  matchesKey: 'plantas_energia_PA',
  measureKey: 'metros'
});

// Ejecutar la unión por distancia
var AP_cerca_PE = Union.apply(APGuatemala, plantas, distFiltro);

// Ejecutar la unión por intersección
var AP_dentro_PE = Union.apply(APGuatemala, plantas, interFiltro);
</script>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:f813"></span>
<img src="Img/ej25.png" alt="Visualización y salida de la consola del resultado de una unión de dos colecciones de vectores mediante sus propiedades." width="80%" />
<p class="caption">
Figure 8.13: Visualización y salida de la consola del resultado de una unión de dos colecciones de vectores mediante sus propiedades.
</p>
</div>
</div>
<div id="exportación-de-colecciones-de-vectores" class="section level3 unnumbered hasAnchor">
<h3>Exportación de colecciones de vectores<a href="ee.featurecollection-1.html#exportación-de-colecciones-de-vectores" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>
GEE permite exportar vectores a la sección de <strong>Assets</strong>, al <strong>Google Drive</strong> o al <strong>Google Cloud</strong>. Consideramos que las dos primeras son las que serán más utilizadas, ya que son gratuitas y permiten fácilmente exportar datos. En cambio, la opción de <strong>Google Cloud</strong> es para exportar información a Google Cloud, que suele implicar un costo extra y un registro en dicha plataforma (que no es el mismo registro que GEE).</p>
<p>Para exportar vectores es necesario usar la función <code>Export.table</code> y especificar si va a ser para drive (<code>.toDrive</code>) o para los <strong>Assets</strong> (<code>.toAsset</code>). Sus argumentos en común son:</p>
<ul>
<li><code>Collection</code> (colección): obligatoriamente una colección de vectores <code>ee.FeatureCollection</code>. Si se quiere exportar un solo vector se deberá convertir en una colección de un solo elemento.</li>
<li><code>Description</code> (descripción): es una cadena de texto de usuario (no debe contener espacios, ni símbolos; solo letras, números y guion bajo <code>_</code> ). Esta cadena de texto es una descripción que el usuario quiera darle a la tarea de exportar.</li>
</ul>
<div class="bluebox2">
<div class="awesomeblock">
<p>Es importante recordar que no se podrán exportar vectores a los <strong>Assets</strong> sin geometrías, ni vectores con geometría <code>NULL</code>. Siempre que se quiera exportar una colección de vectores a la sección de <strong>Assets</strong> será necesario especificar alguna geometría por vector de la colección.</p>
</div>
</div>
<p>Los argumentos específicos para exportar a drive <code>Export.table.toDrive</code> son:</p>
<ul>
<li><p><code>Folder</code> (carpeta): cadena de texto del usuario que será el nombre de la carpeta donde se guardará el vector dentro del drive. Si no se especifica este argumento se guarda en el drive sin carpeta, aunque si se especifica un nombre de una carpeta que no existe, dicha carpeta se creará automáticamente.</p></li>
<li><p><code>FileNamePrefix</code> (prefijo del archivo): el prefijo a utilizar para nombrar al vector guardado en drive.</p></li>
<li><p><code>FileFormat</code> (formato del archivo): el tipo de formato en el que se exportará la colección de archivos. GEE permite las siguientes opciones:</p>
<ul>
<li>‘CSV’, valor por defecto, vectores separados por comas. Este formato consta de valores separados por comas, en el que cada coma indica una columna distinta. Este formato es el más utilizado para exportar colecciones de vectores sin geometrías (es decir, una simple tabla de atributos).</li>
<li>‘GeoJSON’ (<em>Geographic JavaScript Object Notation</em>). Formato basado en el lenguaje JSON (<em>JavaScript Object Notation</em>) para almacenar datos vectoriales y sus atributos.</li>
<li>‘KML’ (<em>Keyhole Markup Language</em>). Formato utilizado sobre todo por Google para almacenar datos espaciales y tablas de atributos asociados a ellos.</li>
<li>‘KMZ’ (<em>KML zipped</em>). Formato que consta de un KML comprimido.</li>
<li>‘SHP’ (<em>Shapefile</em>). Formato utilizado por ESRI para almacenar vectores y tablas de atributos asociados a ellos.</li>
<li>‘TFRecord’ (<em>Tensorflow Record</em>). Formato utilizado por Tensorflow para almacenar datos tanto vectoriales como ráster.</li>
</ul></li>
</ul>
<p>El argumento adicional para exportar a los <strong>Assets</strong> <code>Export.table.toAssets</code> es ‘AssetID’, que corresponde el nombre que le pondremos al nuevo archivo (<span style="color: darkblue;">Fig.</span> <a href="ee.featurecollection-1.html#fig:f814">8.14</a>).</p>
<p>Ejercicio 26
</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb61-1"><a href="ee.featurecollection-1.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Determinamos un área de estudio con un polígono</span></span>
<span id="cb61-2"><a href="ee.featurecollection-1.html#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> poligono <span class="op">=</span> ee<span class="op">.</span><span class="at">Geometry</span><span class="op">.</span><span class="fu">Polygon</span>(</span>
<span id="cb61-3"><a href="ee.featurecollection-1.html#cb61-3" aria-hidden="true" tabindex="-1"></a>        [<span class="op">-</span><span class="fl">79.59</span><span class="op">,</span> <span class="fl">7.00</span><span class="op">,</span></span>
<span id="cb61-4"><a href="ee.featurecollection-1.html#cb61-4" aria-hidden="true" tabindex="-1"></a>          <span class="op">-</span><span class="fl">85.02</span><span class="op">,</span> <span class="fl">8.14</span><span class="op">,</span></span>
<span id="cb61-5"><a href="ee.featurecollection-1.html#cb61-5" aria-hidden="true" tabindex="-1"></a>          <span class="op">-</span><span class="fl">88.04</span><span class="op">,</span> <span class="fl">10.68</span><span class="op">,</span></span>
<span id="cb61-6"><a href="ee.featurecollection-1.html#cb61-6" aria-hidden="true" tabindex="-1"></a>          <span class="op">-</span><span class="fl">93.69</span><span class="op">,</span> <span class="fl">9.44</span><span class="op">,</span></span>
<span id="cb61-7"><a href="ee.featurecollection-1.html#cb61-7" aria-hidden="true" tabindex="-1"></a>          <span class="op">-</span><span class="fl">98.51</span><span class="op">,</span> <span class="fl">4.69</span><span class="op">,</span></span>
<span id="cb61-8"><a href="ee.featurecollection-1.html#cb61-8" aria-hidden="true" tabindex="-1"></a>          <span class="op">-</span><span class="fl">94.24</span><span class="op">,</span> <span class="op">-</span><span class="fl">2.93</span><span class="op">,</span></span>
<span id="cb61-9"><a href="ee.featurecollection-1.html#cb61-9" aria-hidden="true" tabindex="-1"></a>          <span class="op">-</span><span class="fl">92.70</span><span class="op">,</span> <span class="fl">0.56</span><span class="op">,</span></span>
<span id="cb61-10"><a href="ee.featurecollection-1.html#cb61-10" aria-hidden="true" tabindex="-1"></a>          <span class="op">-</span><span class="fl">89.13</span><span class="op">,</span> <span class="fl">0.82</span><span class="op">,</span></span>
<span id="cb61-11"><a href="ee.featurecollection-1.html#cb61-11" aria-hidden="true" tabindex="-1"></a>          <span class="op">-</span><span class="fl">87.57</span><span class="op">,</span> <span class="op">-</span><span class="fl">1.55</span><span class="op">,</span></span>
<span id="cb61-12"><a href="ee.featurecollection-1.html#cb61-12" aria-hidden="true" tabindex="-1"></a>          <span class="op">-</span><span class="fl">82.31</span><span class="op">,</span> <span class="op">-</span><span class="fl">0.08</span><span class="op">,</span></span>
<span id="cb61-13"><a href="ee.featurecollection-1.html#cb61-13" aria-hidden="true" tabindex="-1"></a>          <span class="op">-</span><span class="fl">79.64</span><span class="op">,</span> <span class="fl">3.24</span>])<span class="op">;</span></span>
<span id="cb61-14"><a href="ee.featurecollection-1.html#cb61-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-15"><a href="ee.featurecollection-1.html#cb61-15" aria-hidden="true" tabindex="-1"></a><span class="co">// Creamos la colección de vectores de puntos de ejemplo</span></span>
<span id="cb61-16"><a href="ee.featurecollection-1.html#cb61-16" aria-hidden="true" tabindex="-1"></a><span class="kw">var</span> puntos <span class="op">=</span> ee<span class="op">.</span><span class="at">FeatureCollection</span><span class="op">.</span><span class="fu">randomPoints</span>(poligono<span class="op">,</span> <span class="dv">4000</span>)<span class="op">;</span></span>
<span id="cb61-17"><a href="ee.featurecollection-1.html#cb61-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-18"><a href="ee.featurecollection-1.html#cb61-18" aria-hidden="true" tabindex="-1"></a><span class="co">// Exportamos a los assets dentro de la nube</span></span>
<span id="cb61-19"><a href="ee.featurecollection-1.html#cb61-19" aria-hidden="true" tabindex="-1"></a>Export<span class="op">.</span><span class="at">table</span><span class="op">.</span><span class="fu">toAsset</span>({</span>
<span id="cb61-20"><a href="ee.featurecollection-1.html#cb61-20" aria-hidden="true" tabindex="-1"></a>  <span class="dt">collection</span><span class="op">:</span> punto<span class="op">,</span></span>
<span id="cb61-21"><a href="ee.featurecollection-1.html#cb61-21" aria-hidden="true" tabindex="-1"></a>  <span class="dt">description</span><span class="op">:</span> <span class="st">&#39;exportar_puntos_asset&#39;</span><span class="op">,</span></span>
<span id="cb61-22"><a href="ee.featurecollection-1.html#cb61-22" aria-hidden="true" tabindex="-1"></a>  <span class="dt">assetId</span><span class="op">:</span> <span class="st">&#39;puntos_exportados&#39;</span></span>
<span id="cb61-23"><a href="ee.featurecollection-1.html#cb61-23" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb61-24"><a href="ee.featurecollection-1.html#cb61-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-25"><a href="ee.featurecollection-1.html#cb61-25" aria-hidden="true" tabindex="-1"></a><span class="co">// Exportamos al drive personal</span></span>
<span id="cb61-26"><a href="ee.featurecollection-1.html#cb61-26" aria-hidden="true" tabindex="-1"></a>Export<span class="op">.</span><span class="at">table</span><span class="op">.</span><span class="fu">toDrive</span>({</span>
<span id="cb61-27"><a href="ee.featurecollection-1.html#cb61-27" aria-hidden="true" tabindex="-1"></a>  <span class="dt">collection</span><span class="op">:</span>punto<span class="op">,</span> </span>
<span id="cb61-28"><a href="ee.featurecollection-1.html#cb61-28" aria-hidden="true" tabindex="-1"></a>  <span class="dt">description</span><span class="op">:</span><span class="st">&#39;exportar_puntos_drive&#39;</span><span class="op">,</span></span>
<span id="cb61-29"><a href="ee.featurecollection-1.html#cb61-29" aria-hidden="true" tabindex="-1"></a>  <span class="dt">folder</span><span class="op">:</span><span class="st">&#39;carpeta_clase_GEE&#39;</span><span class="op">,</span></span>
<span id="cb61-30"><a href="ee.featurecollection-1.html#cb61-30" aria-hidden="true" tabindex="-1"></a>  <span class="dt">fileNamePrefix</span><span class="op">:</span><span class="st">&#39;puntos_ejemplo&#39;</span><span class="op">,</span></span>
<span id="cb61-31"><a href="ee.featurecollection-1.html#cb61-31" aria-hidden="true" tabindex="-1"></a>  <span class="dt">fileFormat</span><span class="op">:</span><span class="st">&#39;SHP&#39;</span></span>
<span id="cb61-32"><a href="ee.featurecollection-1.html#cb61-32" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code></pre></div>
<script type="text/javascript">
// Determinamos un área de estudio con un polígono
var poligono = ee.Geometry.Polygon(
        [-79.59, 7.00,
          -85.02, 8.14,
          -88.04, 10.68,
          -93.69, 9.44,
          -98.51, 4.69,
          -94.24, -2.93,
          -92.70, 0.56,
          -89.13, 0.82,
          -87.57, -1.55,
          -82.31, -0.08,
          -79.64, 3.24]);

// Creamos la colección de vectores de puntos de ejemplo
var puntos = ee.FeatureCollection.randomPoints(poligono, 4000);

// Exportamos a los assets dentro de la nube
Export.table.toAsset({
  collection: punto,
  description: 'exportar_puntos_asset',
  assetId: 'puntos_exportados'
});

// Exportamos al drive personal
Export.table.toDrive({
  collection:punto, 
  description:'exportar_puntos_drive',
  folder:'carpeta_clase_GEE',
  fileNamePrefix:'puntos_ejemplo',
  fileFormat:'SHP'
});
</script>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:f814"></span>
<img src="Img/ej26.png" alt="Visualización de la información a exportar, así como su salida en la pestaña de Tasks (tareas)." width="80%" />
<p class="caption">
Figure 8.14: Visualización de la información a exportar, así como su salida en la pestaña de <strong>Tasks</strong> (tareas).
</p>
</div>
<p>Es importante recordar que es necesario dar clic al botón de <strong>Run</strong> en la pestaña de <strong>Tasks</strong> (tareas) para que se lleve a cabo la exportación (<span style="color: darkblue;">Fig.</span> <a href="ee.featurecollection-1.html#fig:f815">8.15</a>).</p>

<div class="figure" style="text-align: center"><span style="display:block;" id="fig:f815"></span>
<img src="Img/boton_run.png" alt="Ubicación del botón Run para ejecutar una tarea de exportación." width="60%" />
<p class="caption">
Figure 8.15: Ubicación del botón <strong>Run</strong> para ejecutar una tarea de exportación.
</p>
</div>

<div style="page-break-after: always;"></div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="ee.feature-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ee.image-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "chapter"
}
});
});
</script>

</body>

</html>
