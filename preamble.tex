\usepackage{graphicx}
\usepackage{array}
%%%
%\usepackage{makeidx}
% Para numeración de páginas
\usepackage{fancyhdr}
% Para cuadros de tips
\usepackage{tcolorbox}
\usepackage{awesomebox}
%\usepackage{titling}
% Para fonts, encoding e idioma
\usepackage{lmodern}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[spanish, mexico]{babel}
% Agregar guión a palabras que no quepan
\usepackage{hyphenat}
% Control de títulos en el texto
\usepackage[newparttoc]{titlesec}
% Control de títulos en el table of contents
% Mejor usar este en lugar de tocloft
%\usepackage{titletoc}
% Para el control de viudas y huerfanos
\usepackage[defaultlines=4,all]{nowidow}
%\usepackage{flafter}
% Para poner figuras en floats
\usepackage{float}
% Para manejo de índice
\usepackage[titles]{tocloft}
\usepackage{makeidx}

\addtocontents{toc}{\protect\thispagestyle{fancy}}
\renewcommand{\cftdot}{}

%\makeindex
%\floatplacement{figure}{btp}

% Definir colores
\definecolor{lightblue}{RGB}{222,243,247}
\definecolor{darkblue}{RGB}{29,77,86}
\definecolor{abvrulecolor}{RGB}{22,92,105}

% Captions de figuras
% Cambiar el color para los títulos de figuras
\usepackage[labelfont={color=darkblue,bf},singlelinecheck=off,center]{caption}

% Re definir títulos y formato con titlesec
\renewcommand{\chaptermark}[1]{\markboth{#1}{}}
\renewcommand{\sectionmark}[1]{\markright{#1}{}}
\titlelabel{\thetitle\quad}
\titleformat{\chapter}{\normalfont\LARGE\bfseries\color{darkblue}}{\thechapter}{1em}{}
\titleformat*{\section}{\normalfont\Large\bfseries\color{darkblue}}
\titleformat*{\subsection}{\normalfont\large\bfseries\color{darkblue}}
\titleformat*{\subsubsection}{\normalfont\normalsize\bfseries\color{darkblue}}

% title spacings
\titlespacing*{\chapter}{0pt}{2.5ex}{2.5ex}
\titlespacing{\title}{0pt}{\parskip}{-\parskip}

% Pa definir formato de los table of contents con titletoc
% Capítulo, espacio de izquierda entre número y capítulo
%\titlecontents{chapter}[1.4em]{\large\bfseries}
% Numbered entry format
%{\contentslabel[{\thecontentslabel}]{1.5em}}{}
% Filter page format and below code in brackets
%{\titlerule*[1pc]{}\contentspage}[\addvspace{6pt}]
% Aumentar espacio entre número y letras de capítulos

% Secciones
% Name of section to edit, left spacing, vertical spacing
%\titlecontents{section}[3.9 em]{\vspace{-0.3cm}}
%{}{}
%{\contentslabel[{\thecontentslabel}]{2.3em}}{}
%{\titlerule*[0.7pc]{}\contentspage}[\addvspace{4pt}]

% Definir cajas de color
\newtcolorbox{bluebox2}{
  colback=lightblue,
  colframe=darkblue,
  coltext=black,
  boxsep=0pt,
  arc=0pt
}

% Formato de página
\renewcommand\headrulewidth{0pt}
%
\pagestyle{empty}
  \fancyhf{}
\fancypagestyle{plain}{}
\fancypagestyle{fancy}{}
%\fancypagestyle{toc}{}
%\fancypagestyle{main}{}
%\fancypagestyle{contents}{}

% Para ayudar a que el float sea menos agresivo
\renewcommand{\topfraction}{.8}
\renewcommand{\bottomfraction}{.8}
\renewcommand{\textfraction}{.05}
\renewcommand{\floatpagefraction}{.75}

% Para modificar los colores del table of contents to tocloft
% Title TOC color
\renewcommand{\cfttoctitlefont}{\normalfont\LARGE\bfseries\color{darkblue}}
\renewcommand{\cftpartfont}{\bfseries\color{darkblue}} % tocloft
%\renewcommand{\cftchapfont}{\bfseries\color{darkblue}} % tocloft
%\renewcommand{\cftchappagefont}{\color{darkblue}} % tocloft
%\renewcommand{\cftchappresnum}{\bfseries\color{darkblue}} % tocloft
%\renewcommand{\cftchapaftersnum}{\bfseries\color{darkblue}}
%\renewcommand{\cftchapfont}{\bfseries\Color{darkblue}}% Chapter colour
%\renewcommand{\cftsecfont}{\Color{black}}% Section colour
%\renewcommand{\cftsubsecfont}{\Color{black}}% Subsection colour

% Spacing using tocloft
\advance\cftsecnumwidth 0.5em\relax
\advance\cftsubsecindent 0.5em\relax
\advance\cftsubsecnumwidth 0.5em\relax



% Tratar de cambiar lista de tablas a ejercicios
%\renewcommand{\listtablename}{Lista de Ejercicios}

%\renewcommand{\familydefault}{\rmdefault}
%\renewcommand{\ttdefault}{\ttdefault}

%\renewcommand\headrulewidth{1pt}
%\pagestyle{fancy} 
%  \fancyfoot{}
%  \fancyfoot[LE,RO]{\thepage}
%  \fancyhead{}
%  \fancyhead[LE,RO]{\leftmark}
%  \fancyhead[LO,RE]{\rightmark}
%\fancypagestyle{plain}{}
\makeindex
%\indexsetup
%\renewcommand{\indexsetup}{firstpagestyle=fancy}

% Try to fix the problem of text being moved to occupy whole page
\raggedbottom